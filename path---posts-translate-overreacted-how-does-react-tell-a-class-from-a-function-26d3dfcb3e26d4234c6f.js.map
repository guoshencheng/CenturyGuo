{"version":3,"sources":["webpack:///path---posts-translate-overreacted-how-does-react-tell-a-class-from-a-function-26d3dfcb3e26d4234c6f.js","webpack:///./.cache/json/posts-translate-overreacted-how-does-react-tell-a-class-from-a-function.json"],"names":["webpackJsonp","377","module","exports","data","markdownRemark","html","frontmatter","title","date","tag","pathContext","slug"],"mappings":"AAAAA,cAAc,gBAERC,IACA,SAAUC,EAAQC,GCHxBD,EAAAC,SAAkBC,MAAQC,gBAAkBC,KAAA;AAA4v5DC,aAA62EC,MAAA,4BAAAC,KAAA,oBAAAC,IAAA,2BAA+FC,aAAgBC,KAAA","file":"path---posts-translate-overreacted-how-does-react-tell-a-class-from-a-function-26d3dfcb3e26d4234c6f.js","sourcesContent":["webpackJsonp([9756229565306],{\n\n/***/ 377:\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\"data\":{\"markdownRemark\":{\"html\":\"<blockquote>\\n<p>æœ¬æ–‡å‡ºè‡ª<a href=\\\"https://overreacted.io/\\\">overreacted</a>ï¼Œè¿™æ˜¯<a href=\\\"https://mobile.twitter.com/dan_abramov\\\">Dan Abramov</a>å†™çš„åšå®¢ï¼Œæˆ‘è§‰å¾—å¯¹å¾ˆæœ‰ç”¨æ‰€ä»¥ç‰¹æ„åšäº†è¿™ä¸ªç¿»è¯‘<a href=\\\"/posts/overreacted\\\">ç³»åˆ—</a>ï¼ŒåŸæ–‡é“¾æ¥è¯·æŸ¥çœ‹<a href=\\\"https://overreacted.io/how-does-react-tell-a-class-from-a-function/\\\">è¿™é‡Œ</a></p>\\n</blockquote>\\n<p>æˆ‘ä»¬å¯ä»¥å…ˆæ¥çœ‹ä¸€ä¸‹è¿™ä¸ªç”¨å‡½æ•°å®šä¹‰çš„<code class=\\\"language-text\\\">Greeting</code>ç»„ä»¶:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token operator\\\">&lt;</span>p<span class=\\\"token operator\\\">></span>Hello<span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">/</span>p<span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>Reactä¹Ÿæ”¯æŒå°†è¿™ä¸ªç»„ä»¶å®šä¹‰æˆä¸€ä¸ªç±»:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">Greeting</span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">React<span class=\\\"token punctuation\\\">.</span>Component</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">return</span> <span class=\\\"token operator\\\">&lt;</span>p<span class=\\\"token operator\\\">></span>Hello<span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">/</span>p<span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>(æˆ‘ä»¬åªèƒ½ä½¿ç”¨ç±»çš„å®šä¹‰çš„æ–¹å¼æ¥ä½¿ç”¨ä¸€äº›ç±»ä¼¼äºstateè¿™æ ·çš„åŠŸèƒ½ï¼ŒçŸ¥é“æœ€è¿‘çš„<a href=\\\"https://reactjs.org/docs/hooks-intro.html\\\">hooks</a>)</p>\\n<p>å½“ä½ æƒ³è¦æ¸²æŸ“<code class=\\\"language-text\\\">&lt;Greeting /&gt;</code>æ—¶ï¼Œä½ ä¸ç”¨å…³ç³»å®ƒç©¶ç«Ÿæ˜¯å¦‚ä½•å®šä¹‰çš„:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"jsx\\\">\\n      <pre class=\\\"language-jsx\\\"><code class=\\\"language-jsx\\\"><span class=\\\"token comment\\\">// æ— è®ºæ˜¯å‡½æ•°å®šä¹‰è¿˜æ˜¯ç±»å®šä¹‰</span>\\n<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>Greeting</span> <span class=\\\"token punctuation\\\">/></span></span></code></pre>\\n      </div>\\n<p>ä½†æ˜¯ <em>React è‡ªå·±</em> ä¼šå…³å¿ƒè¿™ä¸¤ç§å®šä¹‰æ–¹å¼çš„åŒºåˆ«</p>\\n<p>å¦‚æœ<code class=\\\"language-text\\\">Greeting</code>æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒReactä¼šç›´æ¥è°ƒç”¨å®ƒ:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token comment\\\">// ä½ çš„ä»£ç </span>\\n<span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token operator\\\">&lt;</span>p<span class=\\\"token operator\\\">></span>Hello<span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">/</span>p<span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token comment\\\">// Reactå†…éƒ¨çš„å®ç°</span>\\n<span class=\\\"token keyword\\\">const</span> result <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span>props<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// &lt;p>Hello&lt;/p></span></code></pre>\\n      </div>\\n<p>ä½†æ˜¯å¦‚æœ<code class=\\\"language-text\\\">Greeting</code>æ˜¯ä¸€ä¸ªç±»ï¼ŒReactéœ€è¦å…ˆè¯•ç”¨<code class=\\\"language-text\\\">new</code>æ¥å®ä¾‹åŒ–å®ƒï¼Œç„¶ååœ¨è°ƒç”¨å®ƒçš„<code class=\\\"language-text\\\">render</code>å‡½æ•°:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token comment\\\">// ä½ çš„ä»£ç </span>\\n<span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">Greeting</span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">React<span class=\\\"token punctuation\\\">.</span>Component</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">return</span> <span class=\\\"token operator\\\">&lt;</span>p<span class=\\\"token operator\\\">></span>Hello<span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">/</span>p<span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token comment\\\">// Reactå†…éƒ¨å®ç°</span>\\n<span class=\\\"token keyword\\\">const</span> instance <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span>props<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// Greeting {}</span>\\n<span class=\\\"token keyword\\\">const</span> result <span class=\\\"token operator\\\">=</span> instance<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// &lt;p>Hello&lt;/p></span></code></pre>\\n      </div>\\n<p>åœ¨ä¸Šé¢çš„ä¸¤ä¸ªä¾‹å­ä¸­ï¼ŒReactçš„ç›®æ ‡éƒ½æ˜¯ä¸€è‡´çš„ï¼Œå°±æ˜¯å°†ä½ éœ€è¦æ¸²æŸ“çš„ReactèŠ‚ç‚¹è·å–åˆ°ï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ˜¯<code class=\\\"language-text\\\">&lt;p&gt;Hellp&lt;/p&gt;</code>ï¼‰ã€‚ä½†æ˜¯è¿™äº›é¢å¤–çš„æ“ä½œå–å†³äº<code class=\\\"language-text\\\">Greeting</code>æ˜¯å¦‚ä½•å®šä¹‰çš„ã€‚</p>\\n<p><strong>é‚£ä¹ˆReactæ˜¯å¦‚ä½•çŸ¥é“è¿™ä¸ªç»„ä»¶æ˜¯ä½¿ç”¨å‡½æ•°å®šä¹‰çš„è¿˜æ˜¯ç±»å®šä¹‰çš„å‘¢ï¼Ÿ</strong></p>\\n<p>å°±æƒ³æˆ‘<a href=\\\"/posts/translate-overreacted-why-do-we-write-super-props\\\">ä¹‹å‰çš„æ–‡ç« </a>è®²çš„é‚£æ ·ï¼Œ<strong>å¯¹äºä½¿ç”¨Reactçš„æ—¶å€™ï¼Œä½ å¹¶ä¸<em>éœ€è¦</em>äº†è§£è¿™äº›</strong> å¾ˆå¤šå¹´é‡Œï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“è¿™äº›ã€‚æ‰€ä»¥è¯·ä¸è¦å°†è¿™äº›ä½œä¸ºä½ çš„é¢è¯•é¢˜ç›®ã€‚äº‹å®ä¸Šï¼Œè¿™ç¯‡æ–‡ç« æ›´å¤šçš„æ˜¯è®²è§£Javascriptè€Œä¸æ˜¯React</p>\\n<p>è¿™ç¯‡æ–‡ç« æ˜¯é’ˆå¯¹é‚£äº›æƒ³çŸ¥é“Reactç©¶ç«Ÿå¦‚ä½•å·¥ä½œçš„äººçš„ã€‚ä½ æ˜¯è¿™æ ·çš„äººä¹ˆï¼Ÿé‚£ä¹ˆè®©æˆ‘ä»¬ä¸€èµ·æ¥æ¢ç´¢å§ã€‚</p>\\n<p><strong>è¿™æ˜¯ä¸€ç¯‡éå¸¸é•¿çš„æ—…ç¨‹ã€‚ç³»å¥½å®‰å…¨å¸¦å§ï¼è¿™ç¯‡æ–‡ç« å¹¶ä¸ä¼šæœ‰å¤ªå¤šçš„å…³äºReactæœ¬èº«ï¼Œä½†æ˜¯æˆ‘ä»¬ä¼šæ¢ç´¢åˆ°ä¸€äº›æ¦‚å¿µï¼Œæ¯”å¦‚<code class=\\\"language-text\\\">new</code>,<code class=\\\"language-text\\\">this</code>,<code class=\\\"language-text\\\">class</code>,<code class=\\\"language-text\\\">arrow</code>,<code class=\\\"language-text\\\">functions</code>,<code class=\\\"language-text\\\">prototypela</code>, <code class=\\\"language-text\\\">_proto_</code>,<code class=\\\"language-text\\\">instanceof</code>,ä»¥åŠè¿™äº›ä¸œè¥¿åœ¨Javascriptä¸­æ˜¯å¦‚ä½•ä¸€èµ·å·¥ä½œçš„ã€‚éå¸¸å¹¸è¿çš„æ˜¯ï¼Œä½ åœ¨ä½¿ç”¨Reactçš„æ—¶å€™å¹¶ä¸éœ€è¦å¤ªè€ƒè™‘è¿™äº›ã€‚ä¸è¿‡å‡å¦‚ä½ åœ¨å®ç°Reactçš„è¯ï¼Œé‚£å°±ä¸ä¸€æ ·äº†...</strong></p>\\n<p>(å¦‚æœä½ çœŸçš„åªæ˜¯æƒ³çŸ¥é“æœ€ç»ˆçš„ç­”æ¡ˆçš„è¯ï¼Œå¯ä»¥ç›´æ¥æ»šåŠ¨åˆ°æœ€åº•ä¸‹)</p>\\n<hr>\\n<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ç†è§£ä¸ºä»€ä¹ˆæœ‰å¿…è¦å»å¯¹å‡½æ•°çš„ç”³æ˜æ–¹å¼å’Œç±»çš„ç”³æ˜æ–¹å¼åŒºåˆ†ã€‚å¯ä»¥æ³¨æ„ä¸€ä¸‹æˆ‘ä»¬åœ¨ä½¿ç”¨ç±»çš„ç”³æ˜ç»„ä»¶çš„æ—¶å€™å‘ç”Ÿäº†ä»€ä¹ˆã€‚</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token comment\\\">// å¦‚æœGreetingæ˜¯ä¸€ä¸ªå‡½æ•°</span>\\n<span class=\\\"token keyword\\\">const</span> result <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span>props<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// &lt;p>Hello&lt;/p></span>\\n\\n<span class=\\\"token comment\\\">// å¦‚æœGreetingæ˜¯ä¸€ä¸ªç±»</span>\\n<span class=\\\"gatsby-highlight-code-line\\\"><span class=\\\"token keyword\\\">const</span> instance <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span>props<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// Greeting {}</span>\\n</span><span class=\\\"token keyword\\\">const</span> result <span class=\\\"token operator\\\">=</span> instance<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// &lt;p>Hello&lt;/p></span></code></pre>\\n      </div>\\n<p>è®©æˆ‘ä»¬æ·±åº¦çš„æ¥äº†è§£ä¸€ä¸‹å½“ä½¿ç”¨<code class=\\\"language-text\\\">new</code>çš„æ—¶å€™ï¼ŒJavascriptåšäº†ä»€ä¹ˆ</p>\\n<hr>\\n<p>åœ¨æ¯”è¾ƒæ—©çš„æ—¶å€™ï¼ŒJavascriptè¿˜æ²¡æœ‰å®šä¹‰ç±»çš„æ–¹å¼ã€‚ä½†æ˜¯ä½ å¯ä»¥é€šè¿‡çº¯å‡½æ•°æ¥æ¨¡æ‹Ÿå‡ºä¸€ä¸ªç±»çš„æ•ˆæœã€‚<strong>å…·ä½“çš„æ¥è¯´å°±æ˜¯ï¼Œé€šè¿‡å¯¹å‡½æ•°ä½¿ç”¨<code class=\\\"language-text\\\">new</code>è°ƒç”¨ï¼Œä½ å¯ä»¥ä½¿ç”¨<em>ä»»ä½•</em>å‡½æ•°æ¥ä½œä¸ºä¸€ä¸ªç±»çš„æ„é€ å‡½æ•°</strong>:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token comment\\\">// è¿™åªæ˜¯ä¸€ä¸ªå‡½æ•°</span>\\n<span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">Person</span><span class=\\\"token punctuation\\\">(</span>name<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>name <span class=\\\"token operator\\\">=</span> name<span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">var</span> fred <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Person</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Fred'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// âœ… Person {name: 'Fred'}</span>\\n<span class=\\\"token keyword\\\">var</span> george <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">Person</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'George'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// ğŸ”´ å¹¶ä¸èµ·ä½œç”¨</span></code></pre>\\n      </div>\\n<p>è¿™äº›ä»£ç ä¾ç„¶å¯ä»¥ä½¿ç”¨ï¼Œä½ å¯ä»¥åœ¨å¼€å‘å·¥å…·ä¸­å°è¯•ã€‚</p>\\n<p>å¦‚æœä½ åœ¨è°ƒç”¨<code class=\\\"language-text\\\">Person(&#39;Fred&#39;)</code>çš„æ—¶å€™<strong>ä¸ä½¿ç”¨</strong><code class=\\\"language-text\\\">new</code>æ“ä½œç¬¦ï¼Œå‡½æ•°å†…çš„<code class=\\\"language-text\\\">this</code>æŒ‡å‘å°±ä¼šæŒ‡å‘ä¸€äº›å…¨å±€æˆ–è€…æ²¡æœ‰ä»€ä¹ˆç”¨çš„å¯¹è±¡(æ¯”å¦‚è¯´ï¼Œ<code class=\\\"language-text\\\">window</code>æˆ–è€…<code class=\\\"language-text\\\">undefined</code>)ã€‚å¦‚æœè¿™ä¹ˆä½¿ç”¨çš„è¯ï¼Œæˆ‘ä»¬çš„ä»£ç å°±ä¼šæŠ¥é”™æˆ–è€…æ‰§è¡Œä¸€äº›è®¾ç½®<code class=\\\"language-text\\\">window.name</code>ä¹‹ç±»çš„å‚»å…®å…®çš„äº‹æƒ…ã€‚</p>\\n<p>é€šè¿‡åœ¨è°ƒç”¨å‰æ·»åŠ <code class=\\\"language-text\\\">new</code>çš„æ“ä½œç¬¦ã€‚æˆ‘ä»¬ç›¸å½“äºåœ¨è¯´: \\\"Hey Javascriptï¼Œæˆ‘çŸ¥é“<code class=\\\"language-text\\\">Person</code>æ˜¯ä¸€ä¸ªå‡½æ•°å•¦ï¼Œä½†æ˜¯å¯ä»¥ä¸å¯ä»¥è®©æˆ‘ä»¬å‡è£…å®ƒæ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°\\\"ã€‚<strong>åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œç„¶åè®©<code class=\\\"language-text\\\">Person</code>å‡½æ•°ä¸­çš„<code class=\\\"language-text\\\">this</code>æŒ‡å‘è¿™ä¸ªå¯¹è±¡ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½å¤Ÿä¸ºè¿™ä¸ªå¯¹è±¡è®¾ç½®åƒ<code class=\\\"language-text\\\">this.name</code>è¿™æ ·çš„æˆå‘˜å˜é‡ã€‚ç„¶åå°†è¿™ä¸ªå¯¹è±¡è¿”å›</strong></p>\\n<p>è¿™å°±æ˜¯<code class=\\\"language-text\\\">new</code>è¿™ä¸ªæ“ä½œç¬¦åšçš„äº‹æƒ…</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">var</span> fred <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Person</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Fred'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// è¿”å›æ„é€ å‡½æ•°ä¸­çš„this</span></code></pre>\\n      </div>\\n<p><code class=\\\"language-text\\\">new</code>è¿™ä¸ªæ“ä½œä¹Ÿå°†<code class=\\\"language-text\\\">Person.prototype</code>ä¸­çš„æˆå‘˜å˜é‡ä»£ç†åˆ°äº†<code class=\\\"language-text\\\">fred</code>çš„å¯¹è±¡ä¸Š:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">Person</span><span class=\\\"token punctuation\\\">(</span>name<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>name <span class=\\\"token operator\\\">=</span> name<span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\nPerson<span class=\\\"token punctuation\\\">.</span>prototype<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function-variable function\\\">sayHi</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token function\\\">alert</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Hi, I am '</span> <span class=\\\"token operator\\\">+</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>name<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">var</span> fred <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Person</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Fred'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\nfred<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">sayHi</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>è¿™å°±æ˜¯å¤§å®¶åœ¨Javascriptæ¨å‡ºç±»çš„å†™æ³•ä¹‹å‰æ¨¡æ‹Ÿå‡ºæ¥çš„ç±»</p>\\n<hr>\\n<p>æ‰€ä»¥<code class=\\\"language-text\\\">new</code>åœ¨Javascriptä¸­å·²ç»å­˜åœ¨äº†å¾ˆé•¿æ—¶é—´äº†ï¼Œä½†æ˜¯ï¼Œclassesæ˜¯æœ€è¿‘å‡ å¹´æ‰æœ‰çš„ã€‚ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬å¯ä»¥é‡æ–°ç¼–å†™æˆ‘ä»¬çš„ä»£ç ï¼Œè®©æˆ‘ä»¬ç¦»ä»Šå¤©è¦æ¢ç©¶çš„äº‹æƒ…æ›´åŠ è´´åˆ‡ã€‚</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">Person</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token function\\\">constructor</span><span class=\\\"token punctuation\\\">(</span>name<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>name <span class=\\\"token operator\\\">=</span> name<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n  <span class=\\\"token function\\\">sayHi</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token function\\\">alert</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Hi, I am '</span> <span class=\\\"token operator\\\">+</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>name<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">let</span> fred <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Person</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Fred'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\nfred<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">sayHi</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p><em>æŠ“ä½å¼€å‘è€…æƒ³è¦çš„ä¸œè¥¿</em>åœ¨è®¾è®¡è¯­è¨€å’ŒAPIçš„æ—¶å€™æ˜¯éå¸¸é‡è¦çš„ã€‚</p>\\n<p>å¦‚æœä½ å†™äº†ä¸€ä¸ªå‡½æ•°ï¼ŒJavascriptä¸èƒ½å¤Ÿå®Œå…¨æ˜ç™½ç©¶ç«Ÿè€…æ„å‘³ç€æ˜¯åƒ<code class=\\\"language-text\\\">alert()</code>è¿™æ ·ç›´æ¥è°ƒç”¨æˆ–è€…ä¼šåƒ<code class=\\\"language-text\\\">new Person()</code>è¿™æ ·å½“åšä¸€ä¸ªæ„é€ å‡½æ•°æ¥è°ƒç”¨ã€‚å¦‚æœå¿˜è®°æ‰åœ¨åƒ<code class=\\\"language-text\\\">Person</code>è¿™ç§å‡½æ•°å‰é¢åŠ ä¸Š<code class=\\\"language-text\\\">new</code>æ“ä½œç¬¦ä¼šè®©ä»£ç å‡ºç°ä¸€äº›ç¥å¥‡çš„ç°è±¡ã€‚</p>\\n<p><strong>Classçš„é¢„å‘è®©æˆ‘ä»¬å‘Šè¯‰Javascriptçš„è¿è¡Œè€…: \\\"è¿™ä¸æ˜¯åªæ˜¯ä¸€ä¸ªå‡½æ•° - è¿™æ˜¯ä¸€ä¸ªç±»ï¼Œä»–æœ‰ä¸€ä¸ªæ„é€ å‡½æ•°\\\"</strong>ï¼Œå½“ä½ åœ¨è°ƒç”¨å®ƒçš„æ—¶å€™å¿˜è®°ä½¿ç”¨<code class=\\\"language-text\\\">new</code>æ“ä½œç¬¦çš„æ—¶å€™ï¼ŒJavascriptä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">let</span> fred <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Person</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Fred'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token comment\\\">// âœ… å¦‚æœPersonæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ²¡æœ‰é—®é¢˜</span>\\n<span class=\\\"token comment\\\">// âœ… å¦‚æœPersonæ˜¯ä¸€ä¸ªç±»ï¼Œæ²¡æœ‰é—®é¢˜</span>\\n\\n<span class=\\\"token keyword\\\">let</span> george <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">Person</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'George'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// æˆ‘ä»¬å¿˜è®°æ·»åŠ `new`</span>\\n<span class=\\\"token comment\\\">// ğŸ˜³ å¦‚æœç”¨æˆ·æ˜¯ä¸€ä¸ªç±»ä¼¼æ„é€ å‡½æ•°çš„å‡½æ•° è¿™ä¸ªå‡½æ•°æ‰§è¡Œä¼šå‡ºç°ä¸€äº›å¥‡æ€ªçš„æƒ…å†µ</span>\\n<span class=\\\"token comment\\\">// ğŸ”´ å¦‚æœPersonæ˜¯ä¸€ä¸ªç±»ï¼Œä¼šç«‹é©¬æŠ›å‡ºå¼‚å¸¸</span></code></pre>\\n      </div>\\n<p>è¿™è®©æˆ‘ä»¬åœ¨å‡ºç°ä¸€äº›ç±»ä¼¼äº<code class=\\\"language-text\\\">this.name</code>è¢«èµ‹å€¼ä¸º<code class=\\\"language-text\\\">window.name</code>è€Œä¸æ˜¯<code class=\\\"language-text\\\">georage.name</code>çš„é—®é¢˜ä¹‹å‰å°±èƒ½å¤ŸåŠæ—©çš„å‘ç°é—®é¢˜ã€‚</p>\\n<p>æ‰€ä»¥ï¼Œè¿™å°±ä»£è¡¨ç€Reactéœ€è¦åœ¨åˆ›å»ºç±»ä¹‹å‰åŠ ä¸Šä¸€ä¸ª<code class=\\\"language-text\\\">new</code>ï¼Œæˆ‘ä»¬ä¸èƒ½å¤Ÿåƒæ™®é€šçš„å‡½æ•°é‚£æ ·è°ƒç”¨å®ƒï¼Œå› ä¸ºJavascriptä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">Counter</span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">React<span class=\\\"token punctuation\\\">.</span>Component</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">return</span> <span class=\\\"token operator\\\">&lt;</span>p<span class=\\\"token operator\\\">></span>Hello<span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">/</span>p<span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token comment\\\">// ğŸ”´ React ä¸èƒ½è¿™ä¹ˆåš:</span>\\n<span class=\\\"token keyword\\\">const</span> instance <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">Counter</span><span class=\\\"token punctuation\\\">(</span>props<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>åƒè¿™ä¹ˆå†™ä¼šæœ‰é—®é¢˜ã€‚</p>\\n<hr>\\n<p>åœ¨æˆ‘ä»¬äº†è§£Reactæ˜¯å¦‚ä½•å¤„ç†è¿™ç±»é—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ï¼Œå¤§å¤šæ•°äººåœ¨ä½¿ç”¨Reactçš„æ—¶å€™ä¼šç”¨åˆ°ç±»ä¼¼äºBabelè¿™æ ·çš„ç¼–è¯‘å·¥å…·ï¼Œä»è€Œèƒ½å¤Ÿåœ¨æ—§çš„æµè§ˆå™¨ä¸Šä½¿ç”¨ç±»ä¼¼äºclassè¿™æ ·çš„è¯­æ³•ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨æˆ‘ä»¬çš„è®¾è®¡ä¸­è€ƒè™‘åˆ°ç¼–è¯‘å·¥å…·çš„å­˜åœ¨ã€‚</p>\\n<p>åœ¨ä¸€äº›è€ç‚¹çš„ç‰ˆæœ¬çš„Babelä¸­ï¼Œclassä¸éœ€è¦newä¹Ÿèƒ½å¤Ÿè°ƒç”¨ï¼Œä½†æ˜¯è¿™å½“æ—¶ä¹Ÿæ˜¯å¯ä»¥è§£å†³çš„ - é€šè¿‡æ·»åŠ ä¸€äº›é¢å¤–çš„ä»£ç :</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">Person</span><span class=\\\"token punctuation\\\">(</span>name<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token comment\\\">// A bit simplified from Babel output:</span>\\n  <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token operator\\\">!</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">this</span> <span class=\\\"token keyword\\\">instanceof</span> <span class=\\\"token class-name\\\">Person</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">throw</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">TypeError</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"Cannot call a class as a function\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n  <span class=\\\"token comment\\\">// Our code:</span>\\n  <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>name <span class=\\\"token operator\\\">=</span> name<span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Person</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Fred'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// âœ… Okay</span>\\n<span class=\\\"token function\\\">Person</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'George'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>   <span class=\\\"token comment\\\">// ğŸ”´ Canâ€™t call class as a function</span></code></pre>\\n      </div>\\n<p>ä½ å¯èƒ½å¯ä»¥åœ¨ä½ çš„æ‰“åŒ…åçš„æ–‡ä»¶ä¸­èƒ½å¤Ÿçœ‹åˆ°è¿™äº›ç±»ä¼¼çš„ä»£ç ã€‚å…¶å®è¿™å°±æ˜¯é‚£äº›<code class=\\\"language-text\\\">_classCallCheck</code>çš„å‡½æ•°åšçš„äº‹æƒ…ã€‚(ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç–æ¾æ¨¡å¼(loose mode)æ¥é€šè¿‡ä¸æ£€æŸ¥æ¥å‡å°‘æœ€ç»ˆæ‰“åŒ…åçš„åŒ…å¤§å°ï¼Œä½†æ˜¯è¿™å¯èƒ½ä¼šè®©ä½ æƒ³ç”¨ä¸ŠçœŸæ­£çš„classçš„æ—¶å€™å˜å¾—æ›´åŠ å¤æ‚)</p>\\n<hr>\\n<p>ç°åœ¨ï¼Œä½ åº”è¯¥èƒ½å¤Ÿæ˜ç™½åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™ä½¿ç”¨<code class=\\\"language-text\\\">new</code>å’Œä¸ä½¿ç”¨<code class=\\\"language-text\\\">new</code>çš„åŒºåˆ«:</p>\\n<table>\\n<thead>\\n<tr>\\n<th></th>\\n<th><code class=\\\"language-text\\\">new Person()</code></th>\\n<th><code class=\\\"language-text\\\">Person()</code></th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td><code class=\\\"language-text\\\">class</code></td>\\n<td>âœ… \\n<code class=\\\"language-text\\\">this</code>\\n æ˜¯ \\n<code class=\\\"language-text\\\">Person</code>\\n çš„å®ä¾‹</td>\\n<td>ğŸ”´ \\n<code class=\\\"language-text\\\">TypeError</code></td>\\n</tr>\\n<tr>\\n<td><code class=\\\"language-text\\\">function</code></td>\\n<td>âœ… \\n<code class=\\\"language-text\\\">this</code>\\n æ˜¯ \\n<code class=\\\"language-text\\\">Person</code>\\n å®ä¾‹</td>\\n<td>ğŸ˜³ \\n<code class=\\\"language-text\\\">this</code>\\n æ˜¯ \\n<code class=\\\"language-text\\\">window</code>\\n æˆ–è€… \\n<code class=\\\"language-text\\\">undefined</code></td>\\n</tr>\\n</tbody>\\n</table>\\n<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ éœ€è¦æ­£ç¡®çš„è°ƒç”¨ä½ çš„ç»„ä»¶ã€‚ <strong>å¦‚æœä½ çš„ç»„ä»¶æ˜¯ä½¿ç”¨classæ¥å®šä¹‰çš„ï¼ŒReactéœ€è¦ä½¿ç”¨<code class=\\\"language-text\\\">new</code>æ¥è°ƒç”¨</strong></p>\\n<p>é‚£ä¹ˆReactæ˜¯æ€ä¹ˆç¡®å®šç»„ä»¶ç©¶ç«Ÿæ˜¯ç±»è¿˜æ˜¯å…¶ä»–çš„ç±»å‹å‘¢?</p>\\n<p>è¿™æ²¡æœ‰é‚£ä¹ˆç®€å•ï¼å³ä½¿æˆ‘ä»¬æœ¬å°±å¯ä»¥<a href=\\\"https://stackoverflow.com/questions/29093396/how-do-you-check-the-difference-between-an-ecmascript-6-class-and-function\\\">åœ¨Javascriptä¸­åŒºåˆ†classå’Œå‡½æ•°</a>ï¼Œä½†æ˜¯è¿™å¯¹é‚£äº›é€šè¿‡ç±»ä¼¼Babaelè¿™æ ·çš„å·¥å…·ç¼–è¯‘çš„classæ²¡ç”¨ï¼Œç¼–è¯‘ä¹‹åè¿™äº›classä¼šå˜æˆä¸€ä¸ªçº¯å‡½æ•°ã€‚Reactè§‰å¾—å¾ˆéš¾ç©å„¿ã€‚</p>\\n<hr>\\n<p>OK! é‚£æ˜¯ä¸æ˜¯Reactå¯ä»¥åœ¨æ¯æ¬¡è°ƒç”¨çš„æ—¶å€™éƒ½ä½¿ç”¨<code class=\\\"language-text\\\">new</code>ï¼Ÿéå¸¸ä¸å¹¸ï¼Œè¿™ä¹Ÿä¸è¡Œã€‚</p>\\n<p>åœ¨å‡½æ•°ä¸­ï¼Œä½¿ç”¨<code class=\\\"language-text\\\">new</code>æ¥è°ƒç”¨ä¼šåœ¨å†…éƒ¨è¿”å›ä¸€ä¸ª<code class=\\\"language-text\\\">this</code>çš„å¯¹è±¡ã€‚è¿™å¯¹æ„é€ å‡½æ•°(æ¯”å¦‚<code class=\\\"language-text\\\">Person</code>)ä¼šæ¯”è¾ƒåˆç†ï¼Œä½†æ˜¯å¯¹äºçº¯å‡½æ•°å®šä¹‰çš„ç»„ä»¶è€Œè¨€ï¼Œçœ‹èµ·æ¥å°±å°±ä¼šæ¯”è¾ƒå¥‡æ€ªäº†</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token comment\\\">// æˆ‘ä»¬ä¸å¸Œæœ›`this`æ˜¯ä»»ä½•å¯¹è±¡</span>\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token operator\\\">&lt;</span>p<span class=\\\"token operator\\\">></span>Hello<span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">/</span>p<span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>è¿™ä¹ˆåšæˆ–è®¸å¯ä»¥å‹‰å¼ºä½¿ç”¨ï¼Œä½†æ˜¯è¿™é‡Œè¿˜æœ‰<em>å…¶ä»–çš„</em>ä¸¤ä¸ªåŸå› è®©æˆ‘ä»¬ä¸ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚</p>\\n<hr>\\n<p>The first reason why always using <code class=\\\"language-text\\\">new</code> wouldnâ€™t work is that for native arrow functions (not the ones compiled by Babel), calling with <code class=\\\"language-text\\\">new</code> throws an error:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">Greeting</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token operator\\\">&lt;</span>p<span class=\\\"token operator\\\">></span>Hello<span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">/</span>p<span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// ğŸ”´ Greeting is not a constructor</span></code></pre>\\n      </div>\\n<p>This behavior is intentional and follows from the design of arrow functions. One of the main perks of arrow functions is that they <em>donâ€™t</em> have their own <code class=\\\"language-text\\\">this</code> value â€” instead, <code class=\\\"language-text\\\">this</code> is resolved from the closest regular function:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">Friends</span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">React<span class=\\\"token punctuation\\\">.</span>Component</span> <span class=\\\"token punctuation\\\">{</span>\\n<span class=\\\"gatsby-highlight-code-line\\\">  <span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n</span>    <span class=\\\"token keyword\\\">const</span> friends <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>props<span class=\\\"token punctuation\\\">.</span>friends<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">return</span> friends<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>friend <span class=\\\"token operator\\\">=></span>\\n      <span class=\\\"token operator\\\">&lt;</span>Friend\\n<span class=\\\"gatsby-highlight-code-line\\\">        <span class=\\\"token comment\\\">// `this` is resolved from the `render` method</span>\\n</span><span class=\\\"gatsby-highlight-code-line\\\">        size<span class=\\\"token operator\\\">=</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>props<span class=\\\"token punctuation\\\">.</span>size<span class=\\\"token punctuation\\\">}</span>\\n</span>        name<span class=\\\"token operator\\\">=</span><span class=\\\"token punctuation\\\">{</span>friend<span class=\\\"token punctuation\\\">.</span>name<span class=\\\"token punctuation\\\">}</span>\\n        key<span class=\\\"token operator\\\">=</span><span class=\\\"token punctuation\\\">{</span>friend<span class=\\\"token punctuation\\\">.</span>id<span class=\\\"token punctuation\\\">}</span>\\n      <span class=\\\"token operator\\\">/</span><span class=\\\"token operator\\\">></span>\\n    <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>Okay, so <strong>arrow functions donâ€™t have their own <code class=\\\"language-text\\\">this</code>.</strong> But that means they would be entirely useless as constructors!</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">Person</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>name<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token comment\\\">// ğŸ”´ This wouldnâ€™t make sense!</span>\\n  <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>name <span class=\\\"token operator\\\">=</span> name<span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>Therefore, <strong>JavaScript disallows calling an arrow function with <code class=\\\"language-text\\\">new</code>.</strong> If you do it, you probably made a mistake anyway, and itâ€™s best to tell you early. This is similar to how JavaScript doesnâ€™t let you call a class <em>without</em> <code class=\\\"language-text\\\">new</code>.</p>\\n<p>This is nice but it also foils our plan. React canâ€™t just call <code class=\\\"language-text\\\">new</code> on everything because it would break arrow functions! We could try detecting arrow functions specifically by their lack of <code class=\\\"language-text\\\">prototype</code>, and not <code class=\\\"language-text\\\">new</code> just them:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span>prototype <span class=\\\"token comment\\\">// undefined</span>\\n<span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span>prototype <span class=\\\"token comment\\\">// {constructor: f}</span></code></pre>\\n      </div>\\n<p>But this <a href=\\\"https://github.com/facebook/react/issues/4599#issuecomment-136562930\\\">wouldnâ€™t work</a> for functions compiled with Babel. This might not be a big deal, but there is another reason that makes this approach a dead end.</p>\\n<hr>\\n<p>Another reason we canâ€™t always use <code class=\\\"language-text\\\">new</code> is that it would preclude React from supporting components that return strings or other primitive types.</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token string\\\">'Hello'</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token function\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// âœ… 'Hello'</span>\\n<span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// ğŸ˜³ Greeting {}</span></code></pre>\\n      </div>\\n<p>This, again, has to do with the quirks of the <a href=\\\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/new\\\"><code class=\\\"language-text\\\">new</code> operator</a> design. As we saw earlier, <code class=\\\"language-text\\\">new</code> tells the JavaScript engine to create an object, make that object <code class=\\\"language-text\\\">this</code> inside the function, and later give us that object as a result of <code class=\\\"language-text\\\">new</code>.</p>\\n<p>However, JavaScript also allows a function called with <code class=\\\"language-text\\\">new</code> to <em>override</em> the return value of <code class=\\\"language-text\\\">new</code> by returning some other object. Presumably, this was considered useful for patterns like pooling where we want to reuse instances:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"gatsby-highlight-code-line\\\"><span class=\\\"token comment\\\">// Created lazily</span>\\n</span><span class=\\\"gatsby-highlight-code-line\\\"><span class=\\\"token keyword\\\">var</span> zeroVector <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">null</span><span class=\\\"token punctuation\\\">;</span>\\n</span>\\n<span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">Vector</span><span class=\\\"token punctuation\\\">(</span>x<span class=\\\"token punctuation\\\">,</span> y<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>x <span class=\\\"token operator\\\">===</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token operator\\\">&amp;&amp;</span> y <span class=\\\"token operator\\\">===</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>zeroVector <span class=\\\"token operator\\\">!==</span> <span class=\\\"token keyword\\\">null</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n<span class=\\\"gatsby-highlight-code-line\\\">      <span class=\\\"token comment\\\">// Reuse the same instance</span>\\n</span><span class=\\\"gatsby-highlight-code-line\\\">      <span class=\\\"token keyword\\\">return</span> zeroVector<span class=\\\"token punctuation\\\">;</span>\\n</span>    <span class=\\\"token punctuation\\\">}</span>\\n    zeroVector <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n  <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>x <span class=\\\"token operator\\\">=</span> x<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>y <span class=\\\"token operator\\\">=</span> y<span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">var</span> a <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Vector</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"gatsby-highlight-code-line\\\"><span class=\\\"token keyword\\\">var</span> b <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Vector</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n</span><span class=\\\"gatsby-highlight-code-line\\\"><span class=\\\"token keyword\\\">var</span> c <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Vector</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// ğŸ˜² b === c</span>\\n</span></code></pre>\\n      </div>\\n<p>However, <code class=\\\"language-text\\\">new</code> also <em>completely ignores</em> a functionâ€™s return value if itâ€™s <em>not</em> an object. If you return a string or a number, itâ€™s like there was no <code class=\\\"language-text\\\">return</code> at all.</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">Answer</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token number\\\">42</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token function\\\">Answer</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// âœ… 42</span>\\n<span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Answer</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// ğŸ˜³ Answer {}</span></code></pre>\\n      </div>\\n<p>There is just no way to read a primitive return value (like a number or a string) from a function when calling it with <code class=\\\"language-text\\\">new</code>. So if React always used <code class=\\\"language-text\\\">new</code>, it would be unable to add support components that return strings!</p>\\n<p>Thatâ€™s unacceptable so we need to compromise.</p>\\n<hr>\\n<p>What did we learn so far? React needs to call classes (including Babel output) <em>with</em> <code class=\\\"language-text\\\">new</code> but it needs to call regular functions or arrow functions (including Babel output) <em>without</em> <code class=\\\"language-text\\\">new</code>. And there is no reliable way to distinguish them.</p>\\n<p><strong>If we canâ€™t solve a general problem, can we solve a more specific one?</strong></p>\\n<p>When you define a component as a class, youâ€™ll likely want to extend <code class=\\\"language-text\\\">React.Component</code> for built-in methods like <code class=\\\"language-text\\\">this.setState()</code>. <strong>Rather than try to detect all classes, can we detect only <code class=\\\"language-text\\\">React.Component</code> descendants?</strong></p>\\n<p>Spoiler: this is exactly what React does.</p>\\n<hr>\\n<p>Perhaps, the idiomatic way to check if <code class=\\\"language-text\\\">Greeting</code> is a React component class is by testing if <code class=\\\"language-text\\\">Greeting.prototype instanceof React.Component</code>:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">A</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">B</span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">A</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span>\\n\\nconsole<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token constant\\\">B</span><span class=\\\"token punctuation\\\">.</span>prototype <span class=\\\"token keyword\\\">instanceof</span> <span class=\\\"token class-name\\\">A</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// true</span></code></pre>\\n      </div>\\n<p>I know what youâ€™re thinking. What just happened here?! To answer this, we need to understand JavaScript prototypes.</p>\\n<p>You might be familiar with the â€œprototype chainâ€. Every object in JavaScript might have a â€œprototypeâ€. When we write <code class=\\\"language-text\\\">fred.sayHi()</code> but <code class=\\\"language-text\\\">fred</code> object has no <code class=\\\"language-text\\\">sayHi</code> property, we look for <code class=\\\"language-text\\\">sayHi</code> property on <code class=\\\"language-text\\\">fred</code>â€™s prototype. If we donâ€™t find it there, we look at the next prototype in the chain â€” <code class=\\\"language-text\\\">fred</code>â€™s prototypeâ€™s prototype. And so on.</p>\\n<p><strong>Confusingly, the <code class=\\\"language-text\\\">prototype</code> property of a class or a function <em>does not</em> point to the prototype of that value.</strong> Iâ€™m not kidding.</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">Person</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span>\\n\\nconsole<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>Person<span class=\\\"token punctuation\\\">.</span>prototype<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// ğŸ¤ª Not Person's prototype</span>\\nconsole<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>Person<span class=\\\"token punctuation\\\">.</span>__proto__<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// ğŸ˜³ Person's prototype</span></code></pre>\\n      </div>\\n<p>So the â€œprototype chainâ€ is more like <code class=\\\"language-text\\\">__proto__.__proto__.__proto__</code> than <code class=\\\"language-text\\\">prototype.prototype.prototype</code>. This took me years to get.</p>\\n<p>Whatâ€™s the <code class=\\\"language-text\\\">prototype</code> property on a function or a class, then? <strong>Itâ€™s the <code class=\\\"language-text\\\">__proto__</code> given to all objects <code class=\\\"language-text\\\">new</code>ed with that class or a function!</strong></p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">Person</span><span class=\\\"token punctuation\\\">(</span>name<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>name <span class=\\\"token operator\\\">=</span> name<span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\nPerson<span class=\\\"token punctuation\\\">.</span>prototype<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function-variable function\\\">sayHi</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token function\\\">alert</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Hi, I am '</span> <span class=\\\"token operator\\\">+</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>name<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"gatsby-highlight-code-line\\\"><span class=\\\"token keyword\\\">var</span> fred <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Person</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Fred'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// Sets `fred.__proto__` to `Person.prototype`</span>\\n</span></code></pre>\\n      </div>\\n<p>And that <code class=\\\"language-text\\\">__proto__</code> chain is how JavaScript looks up properties:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\">fred<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">sayHi</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token comment\\\">// 1. Does fred have a sayHi property? No.</span>\\n<span class=\\\"token comment\\\">// 2. Does fred.__proto__ have a sayHi property? Yes. Call it!</span>\\n\\nfred<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toString</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token comment\\\">// 1. Does fred have a toString property? No.</span>\\n<span class=\\\"token comment\\\">// 2. Does fred.__proto__ have a toString property? No.</span>\\n<span class=\\\"token comment\\\">// 3. Does fred.__proto__.__proto__ have a toString property? Yes. Call it!</span></code></pre>\\n      </div>\\n<p>In practice, you should almost never need to touch <code class=\\\"language-text\\\">__proto__</code> from the code directly unless youâ€™re debugging something related to the prototype chain. If you want to make stuff available on <code class=\\\"language-text\\\">fred.__proto__</code>, youâ€™re supposed to put it on <code class=\\\"language-text\\\">Person.prototype</code>. At least thatâ€™s how it was originally designed.</p>\\n<p>The <code class=\\\"language-text\\\">__proto__</code> property wasnâ€™t even supposed to be exposed by browsers at first because the prototype chain was considered an internal concept. But some browsers added <code class=\\\"language-text\\\">__proto__</code> and eventually it was begrudgingly standardized (but deprecated in favor of <code class=\\\"language-text\\\">Object.getPrototypeOf()</code>).</p>\\n<p><strong>And yet I still find it very confusing that a property called <code class=\\\"language-text\\\">prototype</code> does not give you a valueâ€™s prototype</strong> (for example, <code class=\\\"language-text\\\">fred.prototype</code> is undefined because <code class=\\\"language-text\\\">fred</code> is not a function). Personally, I think this is the biggest reason even experienced developers tend to misunderstand JavaScript prototypes.</p>\\n<hr>\\n<p>This is a long post, eh? Iâ€™d say weâ€™re 80% there. Hang on.</p>\\n<p>We know that when say <code class=\\\"language-text\\\">obj.foo</code>, JavaScript actually looks for <code class=\\\"language-text\\\">foo</code> in <code class=\\\"language-text\\\">obj</code>, <code class=\\\"language-text\\\">obj.__proto__</code>, <code class=\\\"language-text\\\">obj.__proto__.__proto__</code>, and so on.</p>\\n<p>With classes, youâ€™re not exposed directly to this mechanism, but <code class=\\\"language-text\\\">extends</code> also works on top of the good old prototype chain. Thatâ€™s how our React class instance gets access to methods like <code class=\\\"language-text\\\">setState</code>:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"gatsby-highlight-code-line\\\"><span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">Greeting</span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">React<span class=\\\"token punctuation\\\">.</span>Component</span> <span class=\\\"token punctuation\\\">{</span>\\n</span>  <span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">return</span> <span class=\\\"token operator\\\">&lt;</span>p<span class=\\\"token operator\\\">></span>Hello<span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">/</span>p<span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">let</span> c <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\nconsole<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>c<span class=\\\"token punctuation\\\">.</span>__proto__<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// Greeting.prototype</span>\\n<span class=\\\"gatsby-highlight-code-line\\\">console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>c<span class=\\\"token punctuation\\\">.</span>__proto__<span class=\\\"token punctuation\\\">.</span>__proto__<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// React.Component.prototype</span>\\n</span>console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>c<span class=\\\"token punctuation\\\">.</span>__proto__<span class=\\\"token punctuation\\\">.</span>__proto__<span class=\\\"token punctuation\\\">.</span>__proto__<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// Object.prototype</span>\\n\\nc<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>      <span class=\\\"token comment\\\">// Found on c.__proto__ (Greeting.prototype)</span>\\n<span class=\\\"gatsby-highlight-code-line\\\">c<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">setState</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>    <span class=\\\"token comment\\\">// Found on c.__proto__.__proto__ (React.Component.prototype)</span>\\n</span>c<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toString</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>    <span class=\\\"token comment\\\">// Found on c.__proto__.__proto__.__proto__ (Object.prototype)</span></code></pre>\\n      </div>\\n<p>In other words, <strong>when you use classes, an instanceâ€™s <code class=\\\"language-text\\\">__proto__</code> chain â€œmirrorsâ€ the class hierarchy:</strong></p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token comment\\\">// `extends` chain</span>\\nGreeting\\n  â†’ React<span class=\\\"token punctuation\\\">.</span>Component\\n    â†’ <span class=\\\"token function\\\">Object</span> <span class=\\\"token punctuation\\\">(</span>implicitly<span class=\\\"token punctuation\\\">)</span>\\n\\n<span class=\\\"token comment\\\">// `__proto__` chain</span>\\n<span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span>\\n  â†’ Greeting<span class=\\\"token punctuation\\\">.</span>prototype\\n    â†’ React<span class=\\\"token punctuation\\\">.</span>Component<span class=\\\"token punctuation\\\">.</span>prototype\\n      â†’ Object<span class=\\\"token punctuation\\\">.</span>prototype</code></pre>\\n      </div>\\n<p>2 Chainz.</p>\\n<hr>\\n<p>Since the <code class=\\\"language-text\\\">__proto__</code> chain mirrors the class hierarchy, we can check whether a <code class=\\\"language-text\\\">Greeting</code> extends <code class=\\\"language-text\\\">React.Component</code> by starting with <code class=\\\"language-text\\\">Greeting.prototype</code>, and then following down its <code class=\\\"language-text\\\">__proto__</code> chain:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token comment\\\">// `__proto__` chain</span>\\n<span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"gatsby-highlight-code-line\\\">  â†’ Greeting<span class=\\\"token punctuation\\\">.</span>prototype <span class=\\\"token comment\\\">// ğŸ•µï¸ We start here</span>\\n</span><span class=\\\"gatsby-highlight-code-line\\\">    â†’ React<span class=\\\"token punctuation\\\">.</span>Component<span class=\\\"token punctuation\\\">.</span>prototype <span class=\\\"token comment\\\">// âœ… Found it!</span>\\n</span>      â†’ Object<span class=\\\"token punctuation\\\">.</span>prototype</code></pre>\\n      </div>\\n<p>Conveniently, <code class=\\\"language-text\\\">x instanceof Y</code> does exactly this kind of search. It follows the <code class=\\\"language-text\\\">x.__proto__</code> chain looking for <code class=\\\"language-text\\\">Y.prototype</code> there.</p>\\n<p>Normally, itâ€™s used to determine whether something is an instance of a class:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">let</span> greeting <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\nconsole<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>greeting <span class=\\\"token keyword\\\">instanceof</span> <span class=\\\"token class-name\\\">Greeting</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// true</span>\\n<span class=\\\"token comment\\\">// greeting (ğŸ•µï¸â€ We start here)</span>\\n<span class=\\\"token comment\\\">//   .__proto__ â†’ Greeting.prototype (âœ… Found it!)</span>\\n<span class=\\\"token comment\\\">//     .__proto__ â†’ React.Component.prototype </span>\\n<span class=\\\"token comment\\\">//       .__proto__ â†’ Object.prototype</span>\\n\\nconsole<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>greeting <span class=\\\"token keyword\\\">instanceof</span> <span class=\\\"token class-name\\\">React<span class=\\\"token punctuation\\\">.</span>Component</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// true</span>\\n<span class=\\\"token comment\\\">// greeting (ğŸ•µï¸â€ We start here)</span>\\n<span class=\\\"token comment\\\">//   .__proto__ â†’ Greeting.prototype</span>\\n<span class=\\\"token comment\\\">//     .__proto__ â†’ React.Component.prototype (âœ… Found it!)</span>\\n<span class=\\\"token comment\\\">//       .__proto__ â†’ Object.prototype</span>\\n\\nconsole<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>greeting <span class=\\\"token keyword\\\">instanceof</span> <span class=\\\"token class-name\\\">Object</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// true</span>\\n<span class=\\\"token comment\\\">// greeting (ğŸ•µï¸â€ We start here)</span>\\n<span class=\\\"token comment\\\">//   .__proto__ â†’ Greeting.prototype</span>\\n<span class=\\\"token comment\\\">//     .__proto__ â†’ React.Component.prototype</span>\\n<span class=\\\"token comment\\\">//       .__proto__ â†’ Object.prototype (âœ… Found it!)</span>\\n\\nconsole<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>greeting <span class=\\\"token keyword\\\">instanceof</span> <span class=\\\"token class-name\\\">Banana</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// false</span>\\n<span class=\\\"token comment\\\">// greeting (ğŸ•µï¸â€ We start here)</span>\\n<span class=\\\"token comment\\\">//   .__proto__ â†’ Greeting.prototype</span>\\n<span class=\\\"token comment\\\">//     .__proto__ â†’ React.Component.prototype </span>\\n<span class=\\\"token comment\\\">//       .__proto__ â†’ Object.prototype (ğŸ™…â€ Did not find it!)</span></code></pre>\\n      </div>\\n<p>But it would work just as fine to determine if a class extends another class:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\">console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>Greeting<span class=\\\"token punctuation\\\">.</span>prototype <span class=\\\"token keyword\\\">instanceof</span> <span class=\\\"token class-name\\\">React<span class=\\\"token punctuation\\\">.</span>Component</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token comment\\\">// greeting</span>\\n<span class=\\\"token comment\\\">//   .__proto__ â†’ Greeting.prototype (ğŸ•µï¸â€ We start here)</span>\\n<span class=\\\"token comment\\\">//     .__proto__ â†’ React.Component.prototype (âœ… Found it!)</span>\\n<span class=\\\"token comment\\\">//       .__proto__ â†’ Object.prototype</span></code></pre>\\n      </div>\\n<p>And that check is how we could determine if something is a React component class or a regular function.</p>\\n<hr>\\n<p>Thatâ€™s not what React does though. ğŸ˜³</p>\\n<p>One caveat to the <code class=\\\"language-text\\\">instanceof</code> solution is that it doesnâ€™t work when there are multiple copies of React on the page, and the component weâ€™re checking inherits from <em>another</em> React copyâ€™s <code class=\\\"language-text\\\">React.Component</code>. Mixing multiple copies of React in a single project is bad for several reasons but historically weâ€™ve tried to avoid issues when possible. (With Hooks, we <a href=\\\"https://github.com/facebook/react/issues/13991\\\">might need to</a> force deduplication though.)</p>\\n<p>One other possible heuristic could be to check for presence of a <code class=\\\"language-text\\\">render</code> method on the prototype. However, at the time it <a href=\\\"https://github.com/facebook/react/issues/4599#issuecomment-129714112\\\">wasnâ€™t clear</a> how the component API would evolve. Every check has a cost so we wouldnâ€™t want to add more than one. This would also not work if <code class=\\\"language-text\\\">render</code> was defined as an instance method, such as with the class property syntax.</p>\\n<p>So instead, React <a href=\\\"https://github.com/facebook/react/pull/4663\\\">added</a> a special flag to the base component. React checks for the presence of that flag, and thatâ€™s how it knows whether something is a React component class or not.</p>\\n<p>Originally the flag was on the base <code class=\\\"language-text\\\">React.Component</code> class itself:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token comment\\\">// Inside React</span>\\n<span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">Component</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span>\\nComponent<span class=\\\"token punctuation\\\">.</span>isReactClass <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// We can check it like this</span>\\n<span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">Greeting</span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">Component</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span>\\nconsole<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>Greeting<span class=\\\"token punctuation\\\">.</span>isReactClass<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// âœ… Yes</span></code></pre>\\n      </div>\\n<p>However, some class implementations we wanted to target <a href=\\\"https://github.com/scala-js/scala-js/issues/1900\\\">did not</a> copy static properties (or set the non-standard <code class=\\\"language-text\\\">__proto__</code>), so the flag was getting lost.</p>\\n<p>This is why React <a href=\\\"https://github.com/facebook/react/pull/5021\\\">moved</a> this flag to <code class=\\\"language-text\\\">React.Component.prototype</code>: </p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token comment\\\">// Inside React</span>\\n<span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">Component</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span>\\nComponent<span class=\\\"token punctuation\\\">.</span>prototype<span class=\\\"token punctuation\\\">.</span>isReactComponent <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// We can check it like this</span>\\n<span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">Greeting</span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">Component</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span>\\nconsole<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>Greeting<span class=\\\"token punctuation\\\">.</span>prototype<span class=\\\"token punctuation\\\">.</span>isReactComponent<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// âœ… Yes</span></code></pre>\\n      </div>\\n<p><strong>And this is literally all there is to it.</strong></p>\\n<p>You might be wondering why itâ€™s an object and not just a boolean. It doesnâ€™t matter much in practice but early versions of Jest (before Jest was Goodâ„¢ï¸) had automocking turned on by default. The generated mocks omitted primitive properties, <a href=\\\"https://github.com/facebook/react/pull/4663#issuecomment-136533373\\\">breaking the check</a>. Thanks, Jest.</p>\\n<p>The <code class=\\\"language-text\\\">isReactComponent</code> check is <a href=\\\"https://github.com/facebook/react/blob/769b1f270e1251d9dbdce0fcbd9e92e502d059b8/packages/react-reconciler/src/ReactFiber.js#L297-L300\\\">used in React</a> to this day.</p>\\n<p>If you donâ€™t extend <code class=\\\"language-text\\\">React.Component</code>, React wonâ€™t find <code class=\\\"language-text\\\">isReactComponent</code> on the prototype, and wonâ€™t treat component as a class. Now you know why <a href=\\\"https://stackoverflow.com/a/42680526/458193\\\">the most upvoted answer</a> for <code class=\\\"language-text\\\">Cannot call a class as a function</code> error is to add <code class=\\\"language-text\\\">extends React.Component</code>. Finally, a <a href=\\\"https://github.com/facebook/react/pull/11168\\\">warning was added</a> that warns when <code class=\\\"language-text\\\">prototype.render</code> exists but <code class=\\\"language-text\\\">prototype.isReactComponent</code> doesnâ€™t.</p>\\n<hr>\\n<p>You might say this story is a bit of a bait-and-switch. <strong>The actual solution is really simple, but I went on a huge tangent to explain <em>why</em> React ended up with this solution, and what the alternatives were.</strong></p>\\n<p>In my experience, thatâ€™s often the case with library APIs. For an API to be simple to use, you often need to consider the language semantics (possibly, for several languages, including future directions), runtime performance, ergonomics with and without compile-time steps, the state of the ecosystem and packaging solutions, early warnings, and many other things. The end result might not always be the most elegant, but it must be practical.</p>\\n<p><strong>If the final API is successful, <em>its users</em> never have to think about this process.</strong> Instead they can focus on creating apps.</p>\\n<p>But if youâ€™re also curious... itâ€™s nice to know how it works.</p>\",\"frontmatter\":{\"title\":\"ç¿»è¯‘ï¼šReactæ˜¯å¦‚ä½•å°†Functionè½¬å˜æˆç±»çš„\",\"date\":\"02 December, 2018\",\"tag\":\"translate,overreacted\"}}},\"pathContext\":{\"slug\":\"translate-overreacted-how-does-react-tell-a-class-from-a-function\"}}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// path---posts-translate-overreacted-how-does-react-tell-a-class-from-a-function-26d3dfcb3e26d4234c6f.js","module.exports = {\"data\":{\"markdownRemark\":{\"html\":\"<blockquote>\\n<p>æœ¬æ–‡å‡ºè‡ª<a href=\\\"https://overreacted.io/\\\">overreacted</a>ï¼Œè¿™æ˜¯<a href=\\\"https://mobile.twitter.com/dan_abramov\\\">Dan Abramov</a>å†™çš„åšå®¢ï¼Œæˆ‘è§‰å¾—å¯¹å¾ˆæœ‰ç”¨æ‰€ä»¥ç‰¹æ„åšäº†è¿™ä¸ªç¿»è¯‘<a href=\\\"/posts/overreacted\\\">ç³»åˆ—</a>ï¼ŒåŸæ–‡é“¾æ¥è¯·æŸ¥çœ‹<a href=\\\"https://overreacted.io/how-does-react-tell-a-class-from-a-function/\\\">è¿™é‡Œ</a></p>\\n</blockquote>\\n<p>æˆ‘ä»¬å¯ä»¥å…ˆæ¥çœ‹ä¸€ä¸‹è¿™ä¸ªç”¨å‡½æ•°å®šä¹‰çš„<code class=\\\"language-text\\\">Greeting</code>ç»„ä»¶:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token operator\\\">&lt;</span>p<span class=\\\"token operator\\\">></span>Hello<span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">/</span>p<span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>Reactä¹Ÿæ”¯æŒå°†è¿™ä¸ªç»„ä»¶å®šä¹‰æˆä¸€ä¸ªç±»:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">Greeting</span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">React<span class=\\\"token punctuation\\\">.</span>Component</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">return</span> <span class=\\\"token operator\\\">&lt;</span>p<span class=\\\"token operator\\\">></span>Hello<span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">/</span>p<span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>(æˆ‘ä»¬åªèƒ½ä½¿ç”¨ç±»çš„å®šä¹‰çš„æ–¹å¼æ¥ä½¿ç”¨ä¸€äº›ç±»ä¼¼äºstateè¿™æ ·çš„åŠŸèƒ½ï¼ŒçŸ¥é“æœ€è¿‘çš„<a href=\\\"https://reactjs.org/docs/hooks-intro.html\\\">hooks</a>)</p>\\n<p>å½“ä½ æƒ³è¦æ¸²æŸ“<code class=\\\"language-text\\\">&lt;Greeting /&gt;</code>æ—¶ï¼Œä½ ä¸ç”¨å…³ç³»å®ƒç©¶ç«Ÿæ˜¯å¦‚ä½•å®šä¹‰çš„:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"jsx\\\">\\n      <pre class=\\\"language-jsx\\\"><code class=\\\"language-jsx\\\"><span class=\\\"token comment\\\">// æ— è®ºæ˜¯å‡½æ•°å®šä¹‰è¿˜æ˜¯ç±»å®šä¹‰</span>\\n<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>Greeting</span> <span class=\\\"token punctuation\\\">/></span></span></code></pre>\\n      </div>\\n<p>ä½†æ˜¯ <em>React è‡ªå·±</em> ä¼šå…³å¿ƒè¿™ä¸¤ç§å®šä¹‰æ–¹å¼çš„åŒºåˆ«</p>\\n<p>å¦‚æœ<code class=\\\"language-text\\\">Greeting</code>æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒReactä¼šç›´æ¥è°ƒç”¨å®ƒ:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token comment\\\">// ä½ çš„ä»£ç </span>\\n<span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token operator\\\">&lt;</span>p<span class=\\\"token operator\\\">></span>Hello<span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">/</span>p<span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token comment\\\">// Reactå†…éƒ¨çš„å®ç°</span>\\n<span class=\\\"token keyword\\\">const</span> result <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span>props<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// &lt;p>Hello&lt;/p></span></code></pre>\\n      </div>\\n<p>ä½†æ˜¯å¦‚æœ<code class=\\\"language-text\\\">Greeting</code>æ˜¯ä¸€ä¸ªç±»ï¼ŒReactéœ€è¦å…ˆè¯•ç”¨<code class=\\\"language-text\\\">new</code>æ¥å®ä¾‹åŒ–å®ƒï¼Œç„¶ååœ¨è°ƒç”¨å®ƒçš„<code class=\\\"language-text\\\">render</code>å‡½æ•°:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token comment\\\">// ä½ çš„ä»£ç </span>\\n<span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">Greeting</span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">React<span class=\\\"token punctuation\\\">.</span>Component</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">return</span> <span class=\\\"token operator\\\">&lt;</span>p<span class=\\\"token operator\\\">></span>Hello<span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">/</span>p<span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token comment\\\">// Reactå†…éƒ¨å®ç°</span>\\n<span class=\\\"token keyword\\\">const</span> instance <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span>props<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// Greeting {}</span>\\n<span class=\\\"token keyword\\\">const</span> result <span class=\\\"token operator\\\">=</span> instance<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// &lt;p>Hello&lt;/p></span></code></pre>\\n      </div>\\n<p>åœ¨ä¸Šé¢çš„ä¸¤ä¸ªä¾‹å­ä¸­ï¼ŒReactçš„ç›®æ ‡éƒ½æ˜¯ä¸€è‡´çš„ï¼Œå°±æ˜¯å°†ä½ éœ€è¦æ¸²æŸ“çš„ReactèŠ‚ç‚¹è·å–åˆ°ï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ˜¯<code class=\\\"language-text\\\">&lt;p&gt;Hellp&lt;/p&gt;</code>ï¼‰ã€‚ä½†æ˜¯è¿™äº›é¢å¤–çš„æ“ä½œå–å†³äº<code class=\\\"language-text\\\">Greeting</code>æ˜¯å¦‚ä½•å®šä¹‰çš„ã€‚</p>\\n<p><strong>é‚£ä¹ˆReactæ˜¯å¦‚ä½•çŸ¥é“è¿™ä¸ªç»„ä»¶æ˜¯ä½¿ç”¨å‡½æ•°å®šä¹‰çš„è¿˜æ˜¯ç±»å®šä¹‰çš„å‘¢ï¼Ÿ</strong></p>\\n<p>å°±æƒ³æˆ‘<a href=\\\"/posts/translate-overreacted-why-do-we-write-super-props\\\">ä¹‹å‰çš„æ–‡ç« </a>è®²çš„é‚£æ ·ï¼Œ<strong>å¯¹äºä½¿ç”¨Reactçš„æ—¶å€™ï¼Œä½ å¹¶ä¸<em>éœ€è¦</em>äº†è§£è¿™äº›</strong> å¾ˆå¤šå¹´é‡Œï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“è¿™äº›ã€‚æ‰€ä»¥è¯·ä¸è¦å°†è¿™äº›ä½œä¸ºä½ çš„é¢è¯•é¢˜ç›®ã€‚äº‹å®ä¸Šï¼Œè¿™ç¯‡æ–‡ç« æ›´å¤šçš„æ˜¯è®²è§£Javascriptè€Œä¸æ˜¯React</p>\\n<p>è¿™ç¯‡æ–‡ç« æ˜¯é’ˆå¯¹é‚£äº›æƒ³çŸ¥é“Reactç©¶ç«Ÿå¦‚ä½•å·¥ä½œçš„äººçš„ã€‚ä½ æ˜¯è¿™æ ·çš„äººä¹ˆï¼Ÿé‚£ä¹ˆè®©æˆ‘ä»¬ä¸€èµ·æ¥æ¢ç´¢å§ã€‚</p>\\n<p><strong>è¿™æ˜¯ä¸€ç¯‡éå¸¸é•¿çš„æ—…ç¨‹ã€‚ç³»å¥½å®‰å…¨å¸¦å§ï¼è¿™ç¯‡æ–‡ç« å¹¶ä¸ä¼šæœ‰å¤ªå¤šçš„å…³äºReactæœ¬èº«ï¼Œä½†æ˜¯æˆ‘ä»¬ä¼šæ¢ç´¢åˆ°ä¸€äº›æ¦‚å¿µï¼Œæ¯”å¦‚<code class=\\\"language-text\\\">new</code>,<code class=\\\"language-text\\\">this</code>,<code class=\\\"language-text\\\">class</code>,<code class=\\\"language-text\\\">arrow</code>,<code class=\\\"language-text\\\">functions</code>,<code class=\\\"language-text\\\">prototypela</code>, <code class=\\\"language-text\\\">_proto_</code>,<code class=\\\"language-text\\\">instanceof</code>,ä»¥åŠè¿™äº›ä¸œè¥¿åœ¨Javascriptä¸­æ˜¯å¦‚ä½•ä¸€èµ·å·¥ä½œçš„ã€‚éå¸¸å¹¸è¿çš„æ˜¯ï¼Œä½ åœ¨ä½¿ç”¨Reactçš„æ—¶å€™å¹¶ä¸éœ€è¦å¤ªè€ƒè™‘è¿™äº›ã€‚ä¸è¿‡å‡å¦‚ä½ åœ¨å®ç°Reactçš„è¯ï¼Œé‚£å°±ä¸ä¸€æ ·äº†...</strong></p>\\n<p>(å¦‚æœä½ çœŸçš„åªæ˜¯æƒ³çŸ¥é“æœ€ç»ˆçš„ç­”æ¡ˆçš„è¯ï¼Œå¯ä»¥ç›´æ¥æ»šåŠ¨åˆ°æœ€åº•ä¸‹)</p>\\n<hr>\\n<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ç†è§£ä¸ºä»€ä¹ˆæœ‰å¿…è¦å»å¯¹å‡½æ•°çš„ç”³æ˜æ–¹å¼å’Œç±»çš„ç”³æ˜æ–¹å¼åŒºåˆ†ã€‚å¯ä»¥æ³¨æ„ä¸€ä¸‹æˆ‘ä»¬åœ¨ä½¿ç”¨ç±»çš„ç”³æ˜ç»„ä»¶çš„æ—¶å€™å‘ç”Ÿäº†ä»€ä¹ˆã€‚</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token comment\\\">// å¦‚æœGreetingæ˜¯ä¸€ä¸ªå‡½æ•°</span>\\n<span class=\\\"token keyword\\\">const</span> result <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span>props<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// &lt;p>Hello&lt;/p></span>\\n\\n<span class=\\\"token comment\\\">// å¦‚æœGreetingæ˜¯ä¸€ä¸ªç±»</span>\\n<span class=\\\"gatsby-highlight-code-line\\\"><span class=\\\"token keyword\\\">const</span> instance <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span>props<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// Greeting {}</span>\\n</span><span class=\\\"token keyword\\\">const</span> result <span class=\\\"token operator\\\">=</span> instance<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// &lt;p>Hello&lt;/p></span></code></pre>\\n      </div>\\n<p>è®©æˆ‘ä»¬æ·±åº¦çš„æ¥äº†è§£ä¸€ä¸‹å½“ä½¿ç”¨<code class=\\\"language-text\\\">new</code>çš„æ—¶å€™ï¼ŒJavascriptåšäº†ä»€ä¹ˆ</p>\\n<hr>\\n<p>åœ¨æ¯”è¾ƒæ—©çš„æ—¶å€™ï¼ŒJavascriptè¿˜æ²¡æœ‰å®šä¹‰ç±»çš„æ–¹å¼ã€‚ä½†æ˜¯ä½ å¯ä»¥é€šè¿‡çº¯å‡½æ•°æ¥æ¨¡æ‹Ÿå‡ºä¸€ä¸ªç±»çš„æ•ˆæœã€‚<strong>å…·ä½“çš„æ¥è¯´å°±æ˜¯ï¼Œé€šè¿‡å¯¹å‡½æ•°ä½¿ç”¨<code class=\\\"language-text\\\">new</code>è°ƒç”¨ï¼Œä½ å¯ä»¥ä½¿ç”¨<em>ä»»ä½•</em>å‡½æ•°æ¥ä½œä¸ºä¸€ä¸ªç±»çš„æ„é€ å‡½æ•°</strong>:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token comment\\\">// è¿™åªæ˜¯ä¸€ä¸ªå‡½æ•°</span>\\n<span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">Person</span><span class=\\\"token punctuation\\\">(</span>name<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>name <span class=\\\"token operator\\\">=</span> name<span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">var</span> fred <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Person</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Fred'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// âœ… Person {name: 'Fred'}</span>\\n<span class=\\\"token keyword\\\">var</span> george <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">Person</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'George'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// ğŸ”´ å¹¶ä¸èµ·ä½œç”¨</span></code></pre>\\n      </div>\\n<p>è¿™äº›ä»£ç ä¾ç„¶å¯ä»¥ä½¿ç”¨ï¼Œä½ å¯ä»¥åœ¨å¼€å‘å·¥å…·ä¸­å°è¯•ã€‚</p>\\n<p>å¦‚æœä½ åœ¨è°ƒç”¨<code class=\\\"language-text\\\">Person(&#39;Fred&#39;)</code>çš„æ—¶å€™<strong>ä¸ä½¿ç”¨</strong><code class=\\\"language-text\\\">new</code>æ“ä½œç¬¦ï¼Œå‡½æ•°å†…çš„<code class=\\\"language-text\\\">this</code>æŒ‡å‘å°±ä¼šæŒ‡å‘ä¸€äº›å…¨å±€æˆ–è€…æ²¡æœ‰ä»€ä¹ˆç”¨çš„å¯¹è±¡(æ¯”å¦‚è¯´ï¼Œ<code class=\\\"language-text\\\">window</code>æˆ–è€…<code class=\\\"language-text\\\">undefined</code>)ã€‚å¦‚æœè¿™ä¹ˆä½¿ç”¨çš„è¯ï¼Œæˆ‘ä»¬çš„ä»£ç å°±ä¼šæŠ¥é”™æˆ–è€…æ‰§è¡Œä¸€äº›è®¾ç½®<code class=\\\"language-text\\\">window.name</code>ä¹‹ç±»çš„å‚»å…®å…®çš„äº‹æƒ…ã€‚</p>\\n<p>é€šè¿‡åœ¨è°ƒç”¨å‰æ·»åŠ <code class=\\\"language-text\\\">new</code>çš„æ“ä½œç¬¦ã€‚æˆ‘ä»¬ç›¸å½“äºåœ¨è¯´: \\\"Hey Javascriptï¼Œæˆ‘çŸ¥é“<code class=\\\"language-text\\\">Person</code>æ˜¯ä¸€ä¸ªå‡½æ•°å•¦ï¼Œä½†æ˜¯å¯ä»¥ä¸å¯ä»¥è®©æˆ‘ä»¬å‡è£…å®ƒæ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°\\\"ã€‚<strong>åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œç„¶åè®©<code class=\\\"language-text\\\">Person</code>å‡½æ•°ä¸­çš„<code class=\\\"language-text\\\">this</code>æŒ‡å‘è¿™ä¸ªå¯¹è±¡ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½å¤Ÿä¸ºè¿™ä¸ªå¯¹è±¡è®¾ç½®åƒ<code class=\\\"language-text\\\">this.name</code>è¿™æ ·çš„æˆå‘˜å˜é‡ã€‚ç„¶åå°†è¿™ä¸ªå¯¹è±¡è¿”å›</strong></p>\\n<p>è¿™å°±æ˜¯<code class=\\\"language-text\\\">new</code>è¿™ä¸ªæ“ä½œç¬¦åšçš„äº‹æƒ…</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">var</span> fred <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Person</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Fred'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// è¿”å›æ„é€ å‡½æ•°ä¸­çš„this</span></code></pre>\\n      </div>\\n<p><code class=\\\"language-text\\\">new</code>è¿™ä¸ªæ“ä½œä¹Ÿå°†<code class=\\\"language-text\\\">Person.prototype</code>ä¸­çš„æˆå‘˜å˜é‡ä»£ç†åˆ°äº†<code class=\\\"language-text\\\">fred</code>çš„å¯¹è±¡ä¸Š:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">Person</span><span class=\\\"token punctuation\\\">(</span>name<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>name <span class=\\\"token operator\\\">=</span> name<span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\nPerson<span class=\\\"token punctuation\\\">.</span>prototype<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function-variable function\\\">sayHi</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token function\\\">alert</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Hi, I am '</span> <span class=\\\"token operator\\\">+</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>name<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">var</span> fred <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Person</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Fred'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\nfred<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">sayHi</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>è¿™å°±æ˜¯å¤§å®¶åœ¨Javascriptæ¨å‡ºç±»çš„å†™æ³•ä¹‹å‰æ¨¡æ‹Ÿå‡ºæ¥çš„ç±»</p>\\n<hr>\\n<p>æ‰€ä»¥<code class=\\\"language-text\\\">new</code>åœ¨Javascriptä¸­å·²ç»å­˜åœ¨äº†å¾ˆé•¿æ—¶é—´äº†ï¼Œä½†æ˜¯ï¼Œclassesæ˜¯æœ€è¿‘å‡ å¹´æ‰æœ‰çš„ã€‚ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬å¯ä»¥é‡æ–°ç¼–å†™æˆ‘ä»¬çš„ä»£ç ï¼Œè®©æˆ‘ä»¬ç¦»ä»Šå¤©è¦æ¢ç©¶çš„äº‹æƒ…æ›´åŠ è´´åˆ‡ã€‚</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">Person</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token function\\\">constructor</span><span class=\\\"token punctuation\\\">(</span>name<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>name <span class=\\\"token operator\\\">=</span> name<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n  <span class=\\\"token function\\\">sayHi</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token function\\\">alert</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Hi, I am '</span> <span class=\\\"token operator\\\">+</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>name<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">let</span> fred <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Person</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Fred'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\nfred<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">sayHi</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p><em>æŠ“ä½å¼€å‘è€…æƒ³è¦çš„ä¸œè¥¿</em>åœ¨è®¾è®¡è¯­è¨€å’ŒAPIçš„æ—¶å€™æ˜¯éå¸¸é‡è¦çš„ã€‚</p>\\n<p>å¦‚æœä½ å†™äº†ä¸€ä¸ªå‡½æ•°ï¼ŒJavascriptä¸èƒ½å¤Ÿå®Œå…¨æ˜ç™½ç©¶ç«Ÿè€…æ„å‘³ç€æ˜¯åƒ<code class=\\\"language-text\\\">alert()</code>è¿™æ ·ç›´æ¥è°ƒç”¨æˆ–è€…ä¼šåƒ<code class=\\\"language-text\\\">new Person()</code>è¿™æ ·å½“åšä¸€ä¸ªæ„é€ å‡½æ•°æ¥è°ƒç”¨ã€‚å¦‚æœå¿˜è®°æ‰åœ¨åƒ<code class=\\\"language-text\\\">Person</code>è¿™ç§å‡½æ•°å‰é¢åŠ ä¸Š<code class=\\\"language-text\\\">new</code>æ“ä½œç¬¦ä¼šè®©ä»£ç å‡ºç°ä¸€äº›ç¥å¥‡çš„ç°è±¡ã€‚</p>\\n<p><strong>Classçš„é¢„å‘è®©æˆ‘ä»¬å‘Šè¯‰Javascriptçš„è¿è¡Œè€…: \\\"è¿™ä¸æ˜¯åªæ˜¯ä¸€ä¸ªå‡½æ•° - è¿™æ˜¯ä¸€ä¸ªç±»ï¼Œä»–æœ‰ä¸€ä¸ªæ„é€ å‡½æ•°\\\"</strong>ï¼Œå½“ä½ åœ¨è°ƒç”¨å®ƒçš„æ—¶å€™å¿˜è®°ä½¿ç”¨<code class=\\\"language-text\\\">new</code>æ“ä½œç¬¦çš„æ—¶å€™ï¼ŒJavascriptä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">let</span> fred <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Person</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Fred'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token comment\\\">// âœ… å¦‚æœPersonæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ²¡æœ‰é—®é¢˜</span>\\n<span class=\\\"token comment\\\">// âœ… å¦‚æœPersonæ˜¯ä¸€ä¸ªç±»ï¼Œæ²¡æœ‰é—®é¢˜</span>\\n\\n<span class=\\\"token keyword\\\">let</span> george <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">Person</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'George'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// æˆ‘ä»¬å¿˜è®°æ·»åŠ `new`</span>\\n<span class=\\\"token comment\\\">// ğŸ˜³ å¦‚æœç”¨æˆ·æ˜¯ä¸€ä¸ªç±»ä¼¼æ„é€ å‡½æ•°çš„å‡½æ•° è¿™ä¸ªå‡½æ•°æ‰§è¡Œä¼šå‡ºç°ä¸€äº›å¥‡æ€ªçš„æƒ…å†µ</span>\\n<span class=\\\"token comment\\\">// ğŸ”´ å¦‚æœPersonæ˜¯ä¸€ä¸ªç±»ï¼Œä¼šç«‹é©¬æŠ›å‡ºå¼‚å¸¸</span></code></pre>\\n      </div>\\n<p>è¿™è®©æˆ‘ä»¬åœ¨å‡ºç°ä¸€äº›ç±»ä¼¼äº<code class=\\\"language-text\\\">this.name</code>è¢«èµ‹å€¼ä¸º<code class=\\\"language-text\\\">window.name</code>è€Œä¸æ˜¯<code class=\\\"language-text\\\">georage.name</code>çš„é—®é¢˜ä¹‹å‰å°±èƒ½å¤ŸåŠæ—©çš„å‘ç°é—®é¢˜ã€‚</p>\\n<p>æ‰€ä»¥ï¼Œè¿™å°±ä»£è¡¨ç€Reactéœ€è¦åœ¨åˆ›å»ºç±»ä¹‹å‰åŠ ä¸Šä¸€ä¸ª<code class=\\\"language-text\\\">new</code>ï¼Œæˆ‘ä»¬ä¸èƒ½å¤Ÿåƒæ™®é€šçš„å‡½æ•°é‚£æ ·è°ƒç”¨å®ƒï¼Œå› ä¸ºJavascriptä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">Counter</span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">React<span class=\\\"token punctuation\\\">.</span>Component</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">return</span> <span class=\\\"token operator\\\">&lt;</span>p<span class=\\\"token operator\\\">></span>Hello<span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">/</span>p<span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token comment\\\">// ğŸ”´ React ä¸èƒ½è¿™ä¹ˆåš:</span>\\n<span class=\\\"token keyword\\\">const</span> instance <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">Counter</span><span class=\\\"token punctuation\\\">(</span>props<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>åƒè¿™ä¹ˆå†™ä¼šæœ‰é—®é¢˜ã€‚</p>\\n<hr>\\n<p>åœ¨æˆ‘ä»¬äº†è§£Reactæ˜¯å¦‚ä½•å¤„ç†è¿™ç±»é—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ï¼Œå¤§å¤šæ•°äººåœ¨ä½¿ç”¨Reactçš„æ—¶å€™ä¼šç”¨åˆ°ç±»ä¼¼äºBabelè¿™æ ·çš„ç¼–è¯‘å·¥å…·ï¼Œä»è€Œèƒ½å¤Ÿåœ¨æ—§çš„æµè§ˆå™¨ä¸Šä½¿ç”¨ç±»ä¼¼äºclassè¿™æ ·çš„è¯­æ³•ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨æˆ‘ä»¬çš„è®¾è®¡ä¸­è€ƒè™‘åˆ°ç¼–è¯‘å·¥å…·çš„å­˜åœ¨ã€‚</p>\\n<p>åœ¨ä¸€äº›è€ç‚¹çš„ç‰ˆæœ¬çš„Babelä¸­ï¼Œclassä¸éœ€è¦newä¹Ÿèƒ½å¤Ÿè°ƒç”¨ï¼Œä½†æ˜¯è¿™å½“æ—¶ä¹Ÿæ˜¯å¯ä»¥è§£å†³çš„ - é€šè¿‡æ·»åŠ ä¸€äº›é¢å¤–çš„ä»£ç :</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">Person</span><span class=\\\"token punctuation\\\">(</span>name<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token comment\\\">// A bit simplified from Babel output:</span>\\n  <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token operator\\\">!</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">this</span> <span class=\\\"token keyword\\\">instanceof</span> <span class=\\\"token class-name\\\">Person</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">throw</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">TypeError</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"Cannot call a class as a function\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n  <span class=\\\"token comment\\\">// Our code:</span>\\n  <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>name <span class=\\\"token operator\\\">=</span> name<span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Person</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Fred'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// âœ… Okay</span>\\n<span class=\\\"token function\\\">Person</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'George'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>   <span class=\\\"token comment\\\">// ğŸ”´ Canâ€™t call class as a function</span></code></pre>\\n      </div>\\n<p>ä½ å¯èƒ½å¯ä»¥åœ¨ä½ çš„æ‰“åŒ…åçš„æ–‡ä»¶ä¸­èƒ½å¤Ÿçœ‹åˆ°è¿™äº›ç±»ä¼¼çš„ä»£ç ã€‚å…¶å®è¿™å°±æ˜¯é‚£äº›<code class=\\\"language-text\\\">_classCallCheck</code>çš„å‡½æ•°åšçš„äº‹æƒ…ã€‚(ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç–æ¾æ¨¡å¼(loose mode)æ¥é€šè¿‡ä¸æ£€æŸ¥æ¥å‡å°‘æœ€ç»ˆæ‰“åŒ…åçš„åŒ…å¤§å°ï¼Œä½†æ˜¯è¿™å¯èƒ½ä¼šè®©ä½ æƒ³ç”¨ä¸ŠçœŸæ­£çš„classçš„æ—¶å€™å˜å¾—æ›´åŠ å¤æ‚)</p>\\n<hr>\\n<p>ç°åœ¨ï¼Œä½ åº”è¯¥èƒ½å¤Ÿæ˜ç™½åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™ä½¿ç”¨<code class=\\\"language-text\\\">new</code>å’Œä¸ä½¿ç”¨<code class=\\\"language-text\\\">new</code>çš„åŒºåˆ«:</p>\\n<table>\\n<thead>\\n<tr>\\n<th></th>\\n<th><code class=\\\"language-text\\\">new Person()</code></th>\\n<th><code class=\\\"language-text\\\">Person()</code></th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td><code class=\\\"language-text\\\">class</code></td>\\n<td>âœ… \\n<code class=\\\"language-text\\\">this</code>\\n æ˜¯ \\n<code class=\\\"language-text\\\">Person</code>\\n çš„å®ä¾‹</td>\\n<td>ğŸ”´ \\n<code class=\\\"language-text\\\">TypeError</code></td>\\n</tr>\\n<tr>\\n<td><code class=\\\"language-text\\\">function</code></td>\\n<td>âœ… \\n<code class=\\\"language-text\\\">this</code>\\n æ˜¯ \\n<code class=\\\"language-text\\\">Person</code>\\n å®ä¾‹</td>\\n<td>ğŸ˜³ \\n<code class=\\\"language-text\\\">this</code>\\n æ˜¯ \\n<code class=\\\"language-text\\\">window</code>\\n æˆ–è€… \\n<code class=\\\"language-text\\\">undefined</code></td>\\n</tr>\\n</tbody>\\n</table>\\n<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ éœ€è¦æ­£ç¡®çš„è°ƒç”¨ä½ çš„ç»„ä»¶ã€‚ <strong>å¦‚æœä½ çš„ç»„ä»¶æ˜¯ä½¿ç”¨classæ¥å®šä¹‰çš„ï¼ŒReactéœ€è¦ä½¿ç”¨<code class=\\\"language-text\\\">new</code>æ¥è°ƒç”¨</strong></p>\\n<p>é‚£ä¹ˆReactæ˜¯æ€ä¹ˆç¡®å®šç»„ä»¶ç©¶ç«Ÿæ˜¯ç±»è¿˜æ˜¯å…¶ä»–çš„ç±»å‹å‘¢?</p>\\n<p>è¿™æ²¡æœ‰é‚£ä¹ˆç®€å•ï¼å³ä½¿æˆ‘ä»¬æœ¬å°±å¯ä»¥<a href=\\\"https://stackoverflow.com/questions/29093396/how-do-you-check-the-difference-between-an-ecmascript-6-class-and-function\\\">åœ¨Javascriptä¸­åŒºåˆ†classå’Œå‡½æ•°</a>ï¼Œä½†æ˜¯è¿™å¯¹é‚£äº›é€šè¿‡ç±»ä¼¼Babaelè¿™æ ·çš„å·¥å…·ç¼–è¯‘çš„classæ²¡ç”¨ï¼Œç¼–è¯‘ä¹‹åè¿™äº›classä¼šå˜æˆä¸€ä¸ªçº¯å‡½æ•°ã€‚Reactè§‰å¾—å¾ˆéš¾ç©å„¿ã€‚</p>\\n<hr>\\n<p>OK! é‚£æ˜¯ä¸æ˜¯Reactå¯ä»¥åœ¨æ¯æ¬¡è°ƒç”¨çš„æ—¶å€™éƒ½ä½¿ç”¨<code class=\\\"language-text\\\">new</code>ï¼Ÿéå¸¸ä¸å¹¸ï¼Œè¿™ä¹Ÿä¸è¡Œã€‚</p>\\n<p>åœ¨å‡½æ•°ä¸­ï¼Œä½¿ç”¨<code class=\\\"language-text\\\">new</code>æ¥è°ƒç”¨ä¼šåœ¨å†…éƒ¨è¿”å›ä¸€ä¸ª<code class=\\\"language-text\\\">this</code>çš„å¯¹è±¡ã€‚è¿™å¯¹æ„é€ å‡½æ•°(æ¯”å¦‚<code class=\\\"language-text\\\">Person</code>)ä¼šæ¯”è¾ƒåˆç†ï¼Œä½†æ˜¯å¯¹äºçº¯å‡½æ•°å®šä¹‰çš„ç»„ä»¶è€Œè¨€ï¼Œçœ‹èµ·æ¥å°±å°±ä¼šæ¯”è¾ƒå¥‡æ€ªäº†</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token comment\\\">// æˆ‘ä»¬ä¸å¸Œæœ›`this`æ˜¯ä»»ä½•å¯¹è±¡</span>\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token operator\\\">&lt;</span>p<span class=\\\"token operator\\\">></span>Hello<span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">/</span>p<span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>è¿™ä¹ˆåšæˆ–è®¸å¯ä»¥å‹‰å¼ºä½¿ç”¨ï¼Œä½†æ˜¯è¿™é‡Œè¿˜æœ‰<em>å…¶ä»–çš„</em>ä¸¤ä¸ªåŸå› è®©æˆ‘ä»¬ä¸ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚</p>\\n<hr>\\n<p>The first reason why always using <code class=\\\"language-text\\\">new</code> wouldnâ€™t work is that for native arrow functions (not the ones compiled by Babel), calling with <code class=\\\"language-text\\\">new</code> throws an error:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">Greeting</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token operator\\\">&lt;</span>p<span class=\\\"token operator\\\">></span>Hello<span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">/</span>p<span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// ğŸ”´ Greeting is not a constructor</span></code></pre>\\n      </div>\\n<p>This behavior is intentional and follows from the design of arrow functions. One of the main perks of arrow functions is that they <em>donâ€™t</em> have their own <code class=\\\"language-text\\\">this</code> value â€” instead, <code class=\\\"language-text\\\">this</code> is resolved from the closest regular function:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">Friends</span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">React<span class=\\\"token punctuation\\\">.</span>Component</span> <span class=\\\"token punctuation\\\">{</span>\\n<span class=\\\"gatsby-highlight-code-line\\\">  <span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n</span>    <span class=\\\"token keyword\\\">const</span> friends <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>props<span class=\\\"token punctuation\\\">.</span>friends<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">return</span> friends<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>friend <span class=\\\"token operator\\\">=></span>\\n      <span class=\\\"token operator\\\">&lt;</span>Friend\\n<span class=\\\"gatsby-highlight-code-line\\\">        <span class=\\\"token comment\\\">// `this` is resolved from the `render` method</span>\\n</span><span class=\\\"gatsby-highlight-code-line\\\">        size<span class=\\\"token operator\\\">=</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>props<span class=\\\"token punctuation\\\">.</span>size<span class=\\\"token punctuation\\\">}</span>\\n</span>        name<span class=\\\"token operator\\\">=</span><span class=\\\"token punctuation\\\">{</span>friend<span class=\\\"token punctuation\\\">.</span>name<span class=\\\"token punctuation\\\">}</span>\\n        key<span class=\\\"token operator\\\">=</span><span class=\\\"token punctuation\\\">{</span>friend<span class=\\\"token punctuation\\\">.</span>id<span class=\\\"token punctuation\\\">}</span>\\n      <span class=\\\"token operator\\\">/</span><span class=\\\"token operator\\\">></span>\\n    <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>Okay, so <strong>arrow functions donâ€™t have their own <code class=\\\"language-text\\\">this</code>.</strong> But that means they would be entirely useless as constructors!</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">Person</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>name<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token comment\\\">// ğŸ”´ This wouldnâ€™t make sense!</span>\\n  <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>name <span class=\\\"token operator\\\">=</span> name<span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>Therefore, <strong>JavaScript disallows calling an arrow function with <code class=\\\"language-text\\\">new</code>.</strong> If you do it, you probably made a mistake anyway, and itâ€™s best to tell you early. This is similar to how JavaScript doesnâ€™t let you call a class <em>without</em> <code class=\\\"language-text\\\">new</code>.</p>\\n<p>This is nice but it also foils our plan. React canâ€™t just call <code class=\\\"language-text\\\">new</code> on everything because it would break arrow functions! We could try detecting arrow functions specifically by their lack of <code class=\\\"language-text\\\">prototype</code>, and not <code class=\\\"language-text\\\">new</code> just them:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span>prototype <span class=\\\"token comment\\\">// undefined</span>\\n<span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span>prototype <span class=\\\"token comment\\\">// {constructor: f}</span></code></pre>\\n      </div>\\n<p>But this <a href=\\\"https://github.com/facebook/react/issues/4599#issuecomment-136562930\\\">wouldnâ€™t work</a> for functions compiled with Babel. This might not be a big deal, but there is another reason that makes this approach a dead end.</p>\\n<hr>\\n<p>Another reason we canâ€™t always use <code class=\\\"language-text\\\">new</code> is that it would preclude React from supporting components that return strings or other primitive types.</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token string\\\">'Hello'</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token function\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// âœ… 'Hello'</span>\\n<span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// ğŸ˜³ Greeting {}</span></code></pre>\\n      </div>\\n<p>This, again, has to do with the quirks of the <a href=\\\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/new\\\"><code class=\\\"language-text\\\">new</code> operator</a> design. As we saw earlier, <code class=\\\"language-text\\\">new</code> tells the JavaScript engine to create an object, make that object <code class=\\\"language-text\\\">this</code> inside the function, and later give us that object as a result of <code class=\\\"language-text\\\">new</code>.</p>\\n<p>However, JavaScript also allows a function called with <code class=\\\"language-text\\\">new</code> to <em>override</em> the return value of <code class=\\\"language-text\\\">new</code> by returning some other object. Presumably, this was considered useful for patterns like pooling where we want to reuse instances:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"gatsby-highlight-code-line\\\"><span class=\\\"token comment\\\">// Created lazily</span>\\n</span><span class=\\\"gatsby-highlight-code-line\\\"><span class=\\\"token keyword\\\">var</span> zeroVector <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">null</span><span class=\\\"token punctuation\\\">;</span>\\n</span>\\n<span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">Vector</span><span class=\\\"token punctuation\\\">(</span>x<span class=\\\"token punctuation\\\">,</span> y<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>x <span class=\\\"token operator\\\">===</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token operator\\\">&amp;&amp;</span> y <span class=\\\"token operator\\\">===</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>zeroVector <span class=\\\"token operator\\\">!==</span> <span class=\\\"token keyword\\\">null</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n<span class=\\\"gatsby-highlight-code-line\\\">      <span class=\\\"token comment\\\">// Reuse the same instance</span>\\n</span><span class=\\\"gatsby-highlight-code-line\\\">      <span class=\\\"token keyword\\\">return</span> zeroVector<span class=\\\"token punctuation\\\">;</span>\\n</span>    <span class=\\\"token punctuation\\\">}</span>\\n    zeroVector <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n  <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>x <span class=\\\"token operator\\\">=</span> x<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>y <span class=\\\"token operator\\\">=</span> y<span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">var</span> a <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Vector</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"gatsby-highlight-code-line\\\"><span class=\\\"token keyword\\\">var</span> b <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Vector</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n</span><span class=\\\"gatsby-highlight-code-line\\\"><span class=\\\"token keyword\\\">var</span> c <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Vector</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// ğŸ˜² b === c</span>\\n</span></code></pre>\\n      </div>\\n<p>However, <code class=\\\"language-text\\\">new</code> also <em>completely ignores</em> a functionâ€™s return value if itâ€™s <em>not</em> an object. If you return a string or a number, itâ€™s like there was no <code class=\\\"language-text\\\">return</code> at all.</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">Answer</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token number\\\">42</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token function\\\">Answer</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// âœ… 42</span>\\n<span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Answer</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// ğŸ˜³ Answer {}</span></code></pre>\\n      </div>\\n<p>There is just no way to read a primitive return value (like a number or a string) from a function when calling it with <code class=\\\"language-text\\\">new</code>. So if React always used <code class=\\\"language-text\\\">new</code>, it would be unable to add support components that return strings!</p>\\n<p>Thatâ€™s unacceptable so we need to compromise.</p>\\n<hr>\\n<p>What did we learn so far? React needs to call classes (including Babel output) <em>with</em> <code class=\\\"language-text\\\">new</code> but it needs to call regular functions or arrow functions (including Babel output) <em>without</em> <code class=\\\"language-text\\\">new</code>. And there is no reliable way to distinguish them.</p>\\n<p><strong>If we canâ€™t solve a general problem, can we solve a more specific one?</strong></p>\\n<p>When you define a component as a class, youâ€™ll likely want to extend <code class=\\\"language-text\\\">React.Component</code> for built-in methods like <code class=\\\"language-text\\\">this.setState()</code>. <strong>Rather than try to detect all classes, can we detect only <code class=\\\"language-text\\\">React.Component</code> descendants?</strong></p>\\n<p>Spoiler: this is exactly what React does.</p>\\n<hr>\\n<p>Perhaps, the idiomatic way to check if <code class=\\\"language-text\\\">Greeting</code> is a React component class is by testing if <code class=\\\"language-text\\\">Greeting.prototype instanceof React.Component</code>:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">A</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">B</span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">A</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span>\\n\\nconsole<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token constant\\\">B</span><span class=\\\"token punctuation\\\">.</span>prototype <span class=\\\"token keyword\\\">instanceof</span> <span class=\\\"token class-name\\\">A</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// true</span></code></pre>\\n      </div>\\n<p>I know what youâ€™re thinking. What just happened here?! To answer this, we need to understand JavaScript prototypes.</p>\\n<p>You might be familiar with the â€œprototype chainâ€. Every object in JavaScript might have a â€œprototypeâ€. When we write <code class=\\\"language-text\\\">fred.sayHi()</code> but <code class=\\\"language-text\\\">fred</code> object has no <code class=\\\"language-text\\\">sayHi</code> property, we look for <code class=\\\"language-text\\\">sayHi</code> property on <code class=\\\"language-text\\\">fred</code>â€™s prototype. If we donâ€™t find it there, we look at the next prototype in the chain â€” <code class=\\\"language-text\\\">fred</code>â€™s prototypeâ€™s prototype. And so on.</p>\\n<p><strong>Confusingly, the <code class=\\\"language-text\\\">prototype</code> property of a class or a function <em>does not</em> point to the prototype of that value.</strong> Iâ€™m not kidding.</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">Person</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span>\\n\\nconsole<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>Person<span class=\\\"token punctuation\\\">.</span>prototype<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// ğŸ¤ª Not Person's prototype</span>\\nconsole<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>Person<span class=\\\"token punctuation\\\">.</span>__proto__<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// ğŸ˜³ Person's prototype</span></code></pre>\\n      </div>\\n<p>So the â€œprototype chainâ€ is more like <code class=\\\"language-text\\\">__proto__.__proto__.__proto__</code> than <code class=\\\"language-text\\\">prototype.prototype.prototype</code>. This took me years to get.</p>\\n<p>Whatâ€™s the <code class=\\\"language-text\\\">prototype</code> property on a function or a class, then? <strong>Itâ€™s the <code class=\\\"language-text\\\">__proto__</code> given to all objects <code class=\\\"language-text\\\">new</code>ed with that class or a function!</strong></p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">Person</span><span class=\\\"token punctuation\\\">(</span>name<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>name <span class=\\\"token operator\\\">=</span> name<span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\nPerson<span class=\\\"token punctuation\\\">.</span>prototype<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function-variable function\\\">sayHi</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token function\\\">alert</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Hi, I am '</span> <span class=\\\"token operator\\\">+</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>name<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"gatsby-highlight-code-line\\\"><span class=\\\"token keyword\\\">var</span> fred <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Person</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Fred'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// Sets `fred.__proto__` to `Person.prototype`</span>\\n</span></code></pre>\\n      </div>\\n<p>And that <code class=\\\"language-text\\\">__proto__</code> chain is how JavaScript looks up properties:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\">fred<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">sayHi</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token comment\\\">// 1. Does fred have a sayHi property? No.</span>\\n<span class=\\\"token comment\\\">// 2. Does fred.__proto__ have a sayHi property? Yes. Call it!</span>\\n\\nfred<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toString</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token comment\\\">// 1. Does fred have a toString property? No.</span>\\n<span class=\\\"token comment\\\">// 2. Does fred.__proto__ have a toString property? No.</span>\\n<span class=\\\"token comment\\\">// 3. Does fred.__proto__.__proto__ have a toString property? Yes. Call it!</span></code></pre>\\n      </div>\\n<p>In practice, you should almost never need to touch <code class=\\\"language-text\\\">__proto__</code> from the code directly unless youâ€™re debugging something related to the prototype chain. If you want to make stuff available on <code class=\\\"language-text\\\">fred.__proto__</code>, youâ€™re supposed to put it on <code class=\\\"language-text\\\">Person.prototype</code>. At least thatâ€™s how it was originally designed.</p>\\n<p>The <code class=\\\"language-text\\\">__proto__</code> property wasnâ€™t even supposed to be exposed by browsers at first because the prototype chain was considered an internal concept. But some browsers added <code class=\\\"language-text\\\">__proto__</code> and eventually it was begrudgingly standardized (but deprecated in favor of <code class=\\\"language-text\\\">Object.getPrototypeOf()</code>).</p>\\n<p><strong>And yet I still find it very confusing that a property called <code class=\\\"language-text\\\">prototype</code> does not give you a valueâ€™s prototype</strong> (for example, <code class=\\\"language-text\\\">fred.prototype</code> is undefined because <code class=\\\"language-text\\\">fred</code> is not a function). Personally, I think this is the biggest reason even experienced developers tend to misunderstand JavaScript prototypes.</p>\\n<hr>\\n<p>This is a long post, eh? Iâ€™d say weâ€™re 80% there. Hang on.</p>\\n<p>We know that when say <code class=\\\"language-text\\\">obj.foo</code>, JavaScript actually looks for <code class=\\\"language-text\\\">foo</code> in <code class=\\\"language-text\\\">obj</code>, <code class=\\\"language-text\\\">obj.__proto__</code>, <code class=\\\"language-text\\\">obj.__proto__.__proto__</code>, and so on.</p>\\n<p>With classes, youâ€™re not exposed directly to this mechanism, but <code class=\\\"language-text\\\">extends</code> also works on top of the good old prototype chain. Thatâ€™s how our React class instance gets access to methods like <code class=\\\"language-text\\\">setState</code>:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"gatsby-highlight-code-line\\\"><span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">Greeting</span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">React<span class=\\\"token punctuation\\\">.</span>Component</span> <span class=\\\"token punctuation\\\">{</span>\\n</span>  <span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">return</span> <span class=\\\"token operator\\\">&lt;</span>p<span class=\\\"token operator\\\">></span>Hello<span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">/</span>p<span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">let</span> c <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\nconsole<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>c<span class=\\\"token punctuation\\\">.</span>__proto__<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// Greeting.prototype</span>\\n<span class=\\\"gatsby-highlight-code-line\\\">console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>c<span class=\\\"token punctuation\\\">.</span>__proto__<span class=\\\"token punctuation\\\">.</span>__proto__<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// React.Component.prototype</span>\\n</span>console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>c<span class=\\\"token punctuation\\\">.</span>__proto__<span class=\\\"token punctuation\\\">.</span>__proto__<span class=\\\"token punctuation\\\">.</span>__proto__<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// Object.prototype</span>\\n\\nc<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>      <span class=\\\"token comment\\\">// Found on c.__proto__ (Greeting.prototype)</span>\\n<span class=\\\"gatsby-highlight-code-line\\\">c<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">setState</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>    <span class=\\\"token comment\\\">// Found on c.__proto__.__proto__ (React.Component.prototype)</span>\\n</span>c<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toString</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>    <span class=\\\"token comment\\\">// Found on c.__proto__.__proto__.__proto__ (Object.prototype)</span></code></pre>\\n      </div>\\n<p>In other words, <strong>when you use classes, an instanceâ€™s <code class=\\\"language-text\\\">__proto__</code> chain â€œmirrorsâ€ the class hierarchy:</strong></p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token comment\\\">// `extends` chain</span>\\nGreeting\\n  â†’ React<span class=\\\"token punctuation\\\">.</span>Component\\n    â†’ <span class=\\\"token function\\\">Object</span> <span class=\\\"token punctuation\\\">(</span>implicitly<span class=\\\"token punctuation\\\">)</span>\\n\\n<span class=\\\"token comment\\\">// `__proto__` chain</span>\\n<span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span>\\n  â†’ Greeting<span class=\\\"token punctuation\\\">.</span>prototype\\n    â†’ React<span class=\\\"token punctuation\\\">.</span>Component<span class=\\\"token punctuation\\\">.</span>prototype\\n      â†’ Object<span class=\\\"token punctuation\\\">.</span>prototype</code></pre>\\n      </div>\\n<p>2 Chainz.</p>\\n<hr>\\n<p>Since the <code class=\\\"language-text\\\">__proto__</code> chain mirrors the class hierarchy, we can check whether a <code class=\\\"language-text\\\">Greeting</code> extends <code class=\\\"language-text\\\">React.Component</code> by starting with <code class=\\\"language-text\\\">Greeting.prototype</code>, and then following down its <code class=\\\"language-text\\\">__proto__</code> chain:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token comment\\\">// `__proto__` chain</span>\\n<span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"gatsby-highlight-code-line\\\">  â†’ Greeting<span class=\\\"token punctuation\\\">.</span>prototype <span class=\\\"token comment\\\">// ğŸ•µï¸ We start here</span>\\n</span><span class=\\\"gatsby-highlight-code-line\\\">    â†’ React<span class=\\\"token punctuation\\\">.</span>Component<span class=\\\"token punctuation\\\">.</span>prototype <span class=\\\"token comment\\\">// âœ… Found it!</span>\\n</span>      â†’ Object<span class=\\\"token punctuation\\\">.</span>prototype</code></pre>\\n      </div>\\n<p>Conveniently, <code class=\\\"language-text\\\">x instanceof Y</code> does exactly this kind of search. It follows the <code class=\\\"language-text\\\">x.__proto__</code> chain looking for <code class=\\\"language-text\\\">Y.prototype</code> there.</p>\\n<p>Normally, itâ€™s used to determine whether something is an instance of a class:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">let</span> greeting <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Greeting</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\nconsole<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>greeting <span class=\\\"token keyword\\\">instanceof</span> <span class=\\\"token class-name\\\">Greeting</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// true</span>\\n<span class=\\\"token comment\\\">// greeting (ğŸ•µï¸â€ We start here)</span>\\n<span class=\\\"token comment\\\">//   .__proto__ â†’ Greeting.prototype (âœ… Found it!)</span>\\n<span class=\\\"token comment\\\">//     .__proto__ â†’ React.Component.prototype </span>\\n<span class=\\\"token comment\\\">//       .__proto__ â†’ Object.prototype</span>\\n\\nconsole<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>greeting <span class=\\\"token keyword\\\">instanceof</span> <span class=\\\"token class-name\\\">React<span class=\\\"token punctuation\\\">.</span>Component</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// true</span>\\n<span class=\\\"token comment\\\">// greeting (ğŸ•µï¸â€ We start here)</span>\\n<span class=\\\"token comment\\\">//   .__proto__ â†’ Greeting.prototype</span>\\n<span class=\\\"token comment\\\">//     .__proto__ â†’ React.Component.prototype (âœ… Found it!)</span>\\n<span class=\\\"token comment\\\">//       .__proto__ â†’ Object.prototype</span>\\n\\nconsole<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>greeting <span class=\\\"token keyword\\\">instanceof</span> <span class=\\\"token class-name\\\">Object</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// true</span>\\n<span class=\\\"token comment\\\">// greeting (ğŸ•µï¸â€ We start here)</span>\\n<span class=\\\"token comment\\\">//   .__proto__ â†’ Greeting.prototype</span>\\n<span class=\\\"token comment\\\">//     .__proto__ â†’ React.Component.prototype</span>\\n<span class=\\\"token comment\\\">//       .__proto__ â†’ Object.prototype (âœ… Found it!)</span>\\n\\nconsole<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>greeting <span class=\\\"token keyword\\\">instanceof</span> <span class=\\\"token class-name\\\">Banana</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// false</span>\\n<span class=\\\"token comment\\\">// greeting (ğŸ•µï¸â€ We start here)</span>\\n<span class=\\\"token comment\\\">//   .__proto__ â†’ Greeting.prototype</span>\\n<span class=\\\"token comment\\\">//     .__proto__ â†’ React.Component.prototype </span>\\n<span class=\\\"token comment\\\">//       .__proto__ â†’ Object.prototype (ğŸ™…â€ Did not find it!)</span></code></pre>\\n      </div>\\n<p>But it would work just as fine to determine if a class extends another class:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\">console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>Greeting<span class=\\\"token punctuation\\\">.</span>prototype <span class=\\\"token keyword\\\">instanceof</span> <span class=\\\"token class-name\\\">React<span class=\\\"token punctuation\\\">.</span>Component</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token comment\\\">// greeting</span>\\n<span class=\\\"token comment\\\">//   .__proto__ â†’ Greeting.prototype (ğŸ•µï¸â€ We start here)</span>\\n<span class=\\\"token comment\\\">//     .__proto__ â†’ React.Component.prototype (âœ… Found it!)</span>\\n<span class=\\\"token comment\\\">//       .__proto__ â†’ Object.prototype</span></code></pre>\\n      </div>\\n<p>And that check is how we could determine if something is a React component class or a regular function.</p>\\n<hr>\\n<p>Thatâ€™s not what React does though. ğŸ˜³</p>\\n<p>One caveat to the <code class=\\\"language-text\\\">instanceof</code> solution is that it doesnâ€™t work when there are multiple copies of React on the page, and the component weâ€™re checking inherits from <em>another</em> React copyâ€™s <code class=\\\"language-text\\\">React.Component</code>. Mixing multiple copies of React in a single project is bad for several reasons but historically weâ€™ve tried to avoid issues when possible. (With Hooks, we <a href=\\\"https://github.com/facebook/react/issues/13991\\\">might need to</a> force deduplication though.)</p>\\n<p>One other possible heuristic could be to check for presence of a <code class=\\\"language-text\\\">render</code> method on the prototype. However, at the time it <a href=\\\"https://github.com/facebook/react/issues/4599#issuecomment-129714112\\\">wasnâ€™t clear</a> how the component API would evolve. Every check has a cost so we wouldnâ€™t want to add more than one. This would also not work if <code class=\\\"language-text\\\">render</code> was defined as an instance method, such as with the class property syntax.</p>\\n<p>So instead, React <a href=\\\"https://github.com/facebook/react/pull/4663\\\">added</a> a special flag to the base component. React checks for the presence of that flag, and thatâ€™s how it knows whether something is a React component class or not.</p>\\n<p>Originally the flag was on the base <code class=\\\"language-text\\\">React.Component</code> class itself:</p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token comment\\\">// Inside React</span>\\n<span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">Component</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span>\\nComponent<span class=\\\"token punctuation\\\">.</span>isReactClass <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// We can check it like this</span>\\n<span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">Greeting</span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">Component</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span>\\nconsole<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>Greeting<span class=\\\"token punctuation\\\">.</span>isReactClass<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// âœ… Yes</span></code></pre>\\n      </div>\\n<p>However, some class implementations we wanted to target <a href=\\\"https://github.com/scala-js/scala-js/issues/1900\\\">did not</a> copy static properties (or set the non-standard <code class=\\\"language-text\\\">__proto__</code>), so the flag was getting lost.</p>\\n<p>This is why React <a href=\\\"https://github.com/facebook/react/pull/5021\\\">moved</a> this flag to <code class=\\\"language-text\\\">React.Component.prototype</code>: </p>\\n<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token comment\\\">// Inside React</span>\\n<span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">Component</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span>\\nComponent<span class=\\\"token punctuation\\\">.</span>prototype<span class=\\\"token punctuation\\\">.</span>isReactComponent <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// We can check it like this</span>\\n<span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">Greeting</span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">Component</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span>\\nconsole<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>Greeting<span class=\\\"token punctuation\\\">.</span>prototype<span class=\\\"token punctuation\\\">.</span>isReactComponent<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// âœ… Yes</span></code></pre>\\n      </div>\\n<p><strong>And this is literally all there is to it.</strong></p>\\n<p>You might be wondering why itâ€™s an object and not just a boolean. It doesnâ€™t matter much in practice but early versions of Jest (before Jest was Goodâ„¢ï¸) had automocking turned on by default. The generated mocks omitted primitive properties, <a href=\\\"https://github.com/facebook/react/pull/4663#issuecomment-136533373\\\">breaking the check</a>. Thanks, Jest.</p>\\n<p>The <code class=\\\"language-text\\\">isReactComponent</code> check is <a href=\\\"https://github.com/facebook/react/blob/769b1f270e1251d9dbdce0fcbd9e92e502d059b8/packages/react-reconciler/src/ReactFiber.js#L297-L300\\\">used in React</a> to this day.</p>\\n<p>If you donâ€™t extend <code class=\\\"language-text\\\">React.Component</code>, React wonâ€™t find <code class=\\\"language-text\\\">isReactComponent</code> on the prototype, and wonâ€™t treat component as a class. Now you know why <a href=\\\"https://stackoverflow.com/a/42680526/458193\\\">the most upvoted answer</a> for <code class=\\\"language-text\\\">Cannot call a class as a function</code> error is to add <code class=\\\"language-text\\\">extends React.Component</code>. Finally, a <a href=\\\"https://github.com/facebook/react/pull/11168\\\">warning was added</a> that warns when <code class=\\\"language-text\\\">prototype.render</code> exists but <code class=\\\"language-text\\\">prototype.isReactComponent</code> doesnâ€™t.</p>\\n<hr>\\n<p>You might say this story is a bit of a bait-and-switch. <strong>The actual solution is really simple, but I went on a huge tangent to explain <em>why</em> React ended up with this solution, and what the alternatives were.</strong></p>\\n<p>In my experience, thatâ€™s often the case with library APIs. For an API to be simple to use, you often need to consider the language semantics (possibly, for several languages, including future directions), runtime performance, ergonomics with and without compile-time steps, the state of the ecosystem and packaging solutions, early warnings, and many other things. The end result might not always be the most elegant, but it must be practical.</p>\\n<p><strong>If the final API is successful, <em>its users</em> never have to think about this process.</strong> Instead they can focus on creating apps.</p>\\n<p>But if youâ€™re also curious... itâ€™s nice to know how it works.</p>\",\"frontmatter\":{\"title\":\"ç¿»è¯‘ï¼šReactæ˜¯å¦‚ä½•å°†Functionè½¬å˜æˆç±»çš„\",\"date\":\"02 December, 2018\",\"tag\":\"translate,overreacted\"}}},\"pathContext\":{\"slug\":\"translate-overreacted-how-does-react-tell-a-class-from-a-function\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./.cache/json/posts-translate-overreacted-how-does-react-tell-a-class-from-a-function.json\n// module id = 377\n// module chunks = 9756229565306"],"sourceRoot":""}