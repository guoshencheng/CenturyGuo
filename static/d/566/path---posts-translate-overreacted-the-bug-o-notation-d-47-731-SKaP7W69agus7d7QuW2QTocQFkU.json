{"data":{"markdownRemark":{"html":"<blockquote>\n<p>æœ¬æ–‡å‡ºè‡ª<a href=\"https://overreacted.io/\">overreacted</a>ï¼Œè¿™æ˜¯<a href=\"https://mobile.twitter.com/dan_abramov\">Dan Abramov</a>å†™çš„åšå®¢ï¼Œæˆ‘è§‰å¾—å¯¹å¾ˆæœ‰ç”¨æ‰€ä»¥ç‰¹æ„åšäº†è¿™ä¸ªç¿»è¯‘<a href=\"/posts/overreacted\">ç³»åˆ—</a>ï¼ŒåŸæ–‡é“¾æ¥è¯·æŸ¥çœ‹<a href=\"https://overreacted.io/the-bug-o-notation/\">è¿™é‡Œ</a></p>\n</blockquote>\n<p>å½“æˆ‘ä»¬åœ¨ç¼–å†™ä¸€äº›éœ€æ±‚é«˜æ€§èƒ½çš„ä»£ç çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å…»æˆä¸€ä¸ªæ—¶åˆ»æ³¨æ„å½“å‰ç®—æ³•å¤æ‚åº¦çš„ä¹ æƒ¯ã€‚æˆ‘ä»¬é€šå¸¸é€šè¿‡å¤§Oè¡¨ç¤ºæ³•æ¥è¯„ä¼°ã€‚</p>\n<p>å¤§Oè¡¨ç¤ºæ³•ç”¨äºè¯„ä¼°<strong>å½“ä½ å°†è¦æ¥å—å¤§é‡æ•°æ®æ¥å¤„ç†çš„æ—¶å€™ä½ çš„ä»£ç çš„è¿è¡Œæ•ˆç‡</strong>ã€‚å‡å¦‚ä½ çš„ç®—æ³•çš„å¤æ‚åº¦æ˜¯O(<i>n<sup>2</sup></i>)å¤æ‚åº¦ï¼Œé‚£ä¹ˆå¤„ç†50æˆ–æ›´é«˜é‡çº§çš„æ•°æ®çš„æ—¶å€™å¤§è‡´ä¼šæ‰§è¡Œ2500æ¬¡ä»¥ä¸Šã€‚å¤§Oè¡¨ç¤ºæ³•ä¸ä¼šç»™ä½ ä¸€ä¸ªå‡†ç¡®çš„æ•°å­—ï¼Œä½†æ˜¯å®ƒèƒ½å¤Ÿå¸®åŠ©ä½ ä¼°ç®—ä½ çš„ç®—æ³•ä½ çš„ä¼¸å±•æ€§(å½“ä½ çš„æ•°æ®é‡å¢åŠ çš„æ—¶å€™ï¼Œä½ çš„ç®—æ³•çš„æ€§èƒ½)ã€‚</p>\n<p>æ¯”å¦‚: O(<i>n</i>), O(<i>n</i> log <i>n</i>), O(<i>n<sup>2</sup></i>), O(<i>n!</i>).</p>\n<p>ä½†æ˜¯<strong>æœ¬æ–‡å¹¶ä¸æ˜¯é˜è¿°ç®—æ³•æˆ–è€…ç®—æ³•æ€§èƒ½çš„</strong>ï¼Œè€Œæ˜¯è®²è¿°APIå’Œè°ƒè¯•çš„ï¼Œä»¥ä¸Šçš„ä¾‹å­åªæ˜¯è¯æ˜: APIçš„è®¾è®¡ä¹Ÿéœ€è¦è€ƒè™‘ç±»ä¼¼çš„æƒ…å†µã€‚</p>\n<hr>\n<p>å®é™…ç”Ÿäº§ä¸­ï¼Œæˆ‘ä»¬æœ‰å¤§é‡çš„æ—¶é—´éƒ½èŠ±åœ¨äº†åœ¨æˆ‘ä»¬çš„ä»£ç ä¸­å¯»æ‰¾å¹¶ä¿®å¤é—®é¢˜ï¼Œå› æ­¤å¾ˆå¤šå¼€å‘è€…éƒ½æœŸæœ›èƒ½å¤Ÿæ›´å¿«çš„æ‰¾åˆ°é—®é¢˜çš„æ‰€åœ¨ï¼Œè™½ç„¶æœ€åæ‰¾åˆ°é—®é¢˜åæ€»æ˜¯ä¼šé‡Šæ€€ï¼Œä½†æ˜¯æœ‰æ—¶å€™ä½ æœ¬å¯ä»¥ä¸€ä¸‹å­å°±å®Œæˆçš„éœ€æ±‚å´éœ€è¦èŠ±è´¹ä¸€æ•´å¤©çš„æ—¶é—´æ¥è¿½è¸ªæŸä¸€ä¸ªbugçœŸçš„è®©äººå¾ˆä¸çˆ½ã€‚</p>\n<p>åœ¨æˆ‘ä»¬é€‰æ‹©æŠ½è±¡ï¼Œåº“æˆ–è€…å·¥å…·çš„ä½¿ç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬åº”å½“éœ€è¦è€ƒè™‘å…¶å¸¦æ¥çš„è°ƒè¯•çš„ä½“éªŒã€‚æœ‰äº›APIæˆ–è€…è¯­è¨€çš„è®¾è®¡è®©å„ç§å„æ ·çš„é—®é¢˜éƒ½å¯èƒ½å‘ç”Ÿï¼Œæœ‰çš„ç”šè‡³ä¼šäº§ç”Ÿæ•°ä¸æ¸…çš„é—®é¢˜ã€‚<strong>é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥æ€ä¹ˆè¯„ä¼°è¿™äº›APIå‘¢</strong></p>\n<p>å¾ˆå¤šå¯¹äºAPIçš„è¯„ä»·ä¸»è¦æ˜¯é’ˆå¯¹APIçš„ç¾æ„Ÿçš„ã€‚ä½†æ˜¯å´<a href=\"https://overreacted.io/optimized-for-change/\">å¾ˆå°‘æœ‰</a>å¯¹APIçš„ä½¿ç”¨ä½“éªŒä½œå‡ºè¯„è®ºçš„ã€‚</p>\n<p><strong>æˆ‘æœ‰ä¸€ä¸ªè‡ªè®¤ä¸ºæ¯”è¾ƒå…¬å¹³çš„å¯¹APIçš„ä½“éªŒå¥½åçš„ä¼°é‡æ–¹å¼ï¼Œæˆ‘æŠŠå®ƒå«åš<em>Bug-O</em>è¡¨ç¤ºæ³•:</strong></p>\n<p><font size=\"40\">ğŸ(<i>n</i>)</font></p>\n<p>å¤§Oè¡¨ç¤ºæ³•æè¿°äº†å½“è¾“å…¥å¢åŠ çš„æ—¶å€™è¿™ä¸ªç®—æ³•çš„å‡ç¼“ç¨‹åº¦ã€‚è€Œ<em>Bug-O</em>è¡¨ç¤ºæ³•è€…æè¿°äº†å½“ä½ çš„ä»£ç é‡å˜å¤šçš„æ—¶å€™ï¼Œè¿™ä¸ªAPIä¼šè®©ä½ çš„æ•ˆç‡é™ä½å¤šå°‘ã€‚</p>\n<hr>\n<p>æ¯”å¦‚ï¼ŒæŸ¥çœ‹ä»¥ä¸‹è¿™æ®µé€šè¿‡<code class=\"language-text\">node.appendChild()</code>å’Œ<code class=\"language-text\">node.removeChild()</code>æ¥æ‰‹åŠ¨æ›´æ–°DOMçš„ä»£ç ï¼Œè¿™æ®µä»£ç è¿˜æ²¡æœ‰è¢«é‡æ„ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">trySubmit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Section 1</span>\n  <span class=\"token keyword\">let</span> spinner <span class=\"token operator\">=</span> <span class=\"token function\">createSpinner</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  formStatus<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>spinner<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">submitForm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  \t<span class=\"token comment\">// Section 2</span>\n    formStatus<span class=\"token punctuation\">.</span><span class=\"token function\">removeChild</span><span class=\"token punctuation\">(</span>spinner<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> successMessage <span class=\"token operator\">=</span> <span class=\"token function\">createSuccessMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    formStatus<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>successMessage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  \t<span class=\"token comment\">// Section 3</span>\n    formStatus<span class=\"token punctuation\">.</span><span class=\"token function\">removeChild</span><span class=\"token punctuation\">(</span>spinner<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> errorMessage <span class=\"token operator\">=</span> <span class=\"token function\">createErrorMessage</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> retryButton <span class=\"token operator\">=</span> <span class=\"token function\">createRetryButton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    formStatus<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>errorMessage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    formStatus<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>retryButton<span class=\"token punctuation\">)</span>\n    retryButton<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Section 4</span>\n      formStatus<span class=\"token punctuation\">.</span><span class=\"token function\">removeChild</span><span class=\"token punctuation\">(</span>errorMessage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      formStatus<span class=\"token punctuation\">.</span><span class=\"token function\">removeChild</span><span class=\"token punctuation\">(</span>retryButton<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">trySubmit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>è¿™æ®µä»£ç çš„é—®é¢˜å¹¶ä¸æ˜¯è¯´è¿™æ®µä»£ç æœ‰ä¸‘é™‹ï¼Œæˆ‘ä»¬ç°åœ¨æ²¡æœ‰è®¨è®ºä»£ç çš„ç¾æ„Ÿã€‚<strong>è¿™æ®µä»£ç çš„é—®é¢˜åœ¨äºï¼Œå¦‚æœè¿™æ®µä»£ç é‡Œæœ‰bugï¼Œæˆ‘ä»¬å¯èƒ½å¹¶ä¸çŸ¥é“ä»ä½•å¼€å§‹æŸ¥æ‰¾</strong></p>\n<p><strong>æ ¹æ®è¿™äº›å›è°ƒå’Œè§¦å‘çš„æ‰§è¡Œé¡ºåºï¼Œå¯ä»¥ç»„åˆå‡ºå¤§é‡çš„ä¸åŒçš„æ‰§è¡Œåˆ†æ”¯</strong>ï¼Œåœ¨è¿™äº›ä¸åŒçš„æ‰§è¡Œä¸­ï¼Œæœ‰äº›ä¼šæŠ›å‡ºæˆåŠŸçš„ä¿¡æ¯ï¼Œæœ‰äº›ä¼šæœ‰å¯¹spinnerã€å¤±è´¥ã€é”™è¯¯ä¿¡æ¯çš„æ“ä½œï¼Œæœ‰çš„ä¼šå¯¼è‡´ç¨‹åºç›´æ¥å´©æºƒã€‚</p>\n<p>è¿™ä¸ªå‡½æ•°æœ‰4ä¸ªä¸åŒçš„åŒºå—ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸èƒ½ä¿è¯ä»–çš„æ‰§è¡Œé¡ºåºï¼Œæˆ‘éå¸¸ä¸é è°±çš„è®¡ç®—èƒ½åŠ›å‘Šè¯‰æˆ‘ï¼Œè¿™é‡Œæœ‰4Ã—3Ã—2Ã—1 = 24ä¸åŒçš„æ‰§è¡Œåˆ†æ”¯å¯ä»¥è¿è¡Œã€‚å¦‚æœæˆ‘åœ¨å¢åŠ 4ä¸ªç›¸åŒçš„ä»£ç å—ï¼Œé‚£å°±ä¼šæœ‰å°†è¿‘ 8Ã—7Ã—6Ã—5Ã—4Ã—3Ã—2Ã—1 - <em>4ä¸‡</em> ç§ç»„åˆã€‚è°ƒè¯•è¿™æ ·çš„ä»£ç åªèƒ½é è¿æ°”äº†ã€‚</p>\n<p><strong>æ¢å¥è¯æ¥è¯´ï¼Œè¿™æ ·çš„ä»£ç çš„Bug-Oå¤æ‚åº¦åº”è¯¥æ¥è¿‘ ğŸ(<i>n!</i>)</strong>ï¼Œè¿™é‡Œçš„<em>n</em>å°±æ˜¯å¯¹DOMæ“ä½œçš„ä»£ç å—çš„æ•°é‡ã€‚å¯¹çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªé˜¶ä¹˜çº§çš„å¤æ‚åº¦ã€‚æ‰€ä»¥ï¼Œè¿™æ˜¯éå¸¸ä¸åˆç†çš„ã€‚ä¸æ˜¯æ‰€æœ‰çš„çš„æ‰§è¡Œåœ¨å®é™…çš„ç¯å¢ƒä¸‹éƒ½å¯èƒ½å‘ç”Ÿã€‚ä½†æ˜¯å¦ä¸€æ–¹é¢ï¼Œæ¯ä¸ªä»£ç å—éƒ½æœ‰å¯èƒ½æ‰§è¡Œå¤šæ¬¡ã€‚<span style=\"word-break: keep-all\">ğŸ(<em>Â¯\\<em>(ãƒ„)</em>/Â¯</em>)</span>æˆ–è®¸å®é™…æƒ…å†µä¸‹ä¼šæ›´åŠ ä¹è§‚ä½†æ˜¯ä¾ç„¶æ˜¯ä¸€ç§éå¸¸åçš„æƒ…å†µã€‚æˆ‘ä»¬å¯ä»¥åšçš„æ›´å¥½ã€‚</p>\n<hr>\n<p>ä¸ºäº†æå‡è¿™æ®µä»£ç çš„Bug-OæŒ‡æ•°ï¼Œæˆ‘ä»¬å¯ä»¥é™åˆ¶çŠ¶æ€å’Œè¾“å‡ºã€‚æˆ‘ä»¬å¯ä»¥ä¸å€ŸåŠ©ä»»ä½•çš„æ¡†æ¶å°±å®ç°è¿™äº›ï¼Œæ€»æ˜¯ä½¿ç”¨ä¸€äº›æ¡†æ¶åœ¨æˆ‘ä»¬çš„ä»£ç ä¸­æœ‰æ—¶ä¹Ÿä¼šé€ æˆä¸€äº›é—®é¢˜ï¼Œä»¥ä¸‹æ˜¯æˆ‘ä»¬çš„ä¸€ç§å®ç°æ–¹å¼:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> currentState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  step<span class=\"token punctuation\">:</span> <span class=\"token string\">'initial'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 'initial' | 'pending' | 'success' | 'error'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">trySubmit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>currentState<span class=\"token punctuation\">.</span>step <span class=\"token operator\">===</span> <span class=\"token string\">'pending'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ä¸å…è®¸æäº¤ä¸¤æ¬¡</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> step<span class=\"token punctuation\">:</span> <span class=\"token string\">'pending'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  submitForm<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> step<span class=\"token punctuation\">:</span> <span class=\"token string\">'success'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> step<span class=\"token punctuation\">:</span> <span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span> error <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nextState</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// æ¸…é™¤æ‰€æœ‰çš„å·²å­˜åœ¨çš„å­å…ƒç´ </span>\n  formStatus<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n\n  currentState <span class=\"token operator\">=</span> nextState<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>nextState<span class=\"token punctuation\">.</span>step<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'initial'</span><span class=\"token punctuation\">:</span>\n      <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'pending'</span><span class=\"token punctuation\">:</span>\n      formStatus<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>spinner<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'success'</span><span class=\"token punctuation\">:</span>\n      <span class=\"token keyword\">let</span> successMessage <span class=\"token operator\">=</span> <span class=\"token function\">createSuccessMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      formStatus<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>successMessage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'error'</span><span class=\"token punctuation\">:</span>\n      <span class=\"token keyword\">let</span> errorMessage <span class=\"token operator\">=</span> <span class=\"token function\">createErrorMessage</span><span class=\"token punctuation\">(</span>nextState<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">let</span> retryButton <span class=\"token operator\">=</span> <span class=\"token function\">createRetryButton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      formStatus<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>errorMessage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      formStatus<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>retryButton<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      retryButton<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> trySubmit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ä»£ç å¹¶æ²¡æœ‰å¾ˆå¤§çš„å˜åŒ–ï¼Œç”šè‡³çœ‹èµ·æ¥ä¼šæ›´åŠ çš„ç¹çã€‚ä½†æ˜¯è¿™æ®µä»£ç æ˜¾ç„¶æ›´åŠ å®¹æ˜“è°ƒè¯•ï¼Œå› ä¸ºè¿™è¡Œä»£ç :</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nextState</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// æ¸…é™¤æ‰€æœ‰çš„å·²å­˜åœ¨çš„å­å…ƒç´ </span>\n<span class=\"gatsby-highlight-code-line\">  formStatus<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token comment\">// ... æ ¹æ®formçš„çŠ¶æ€æ¥æ·»åŠ å­å…ƒç´ </span></code></pre></div>\n<p>é€šè¿‡åœ¨åšä»»ä½•æ“ä½œä¹‹å‰æ¸…é™¤formçš„çŠ¶æ€ï¼Œæˆ‘ä»¬å¯ä»¥ä¿è¯æˆ‘ä»¬çš„DOMæ“ä½œæ€»æ˜¯ä»ä¸€ä¸ªæç©ºçš„å®¹å™¨å¼€å§‹çš„ã€‚è¿™å°±æ˜¯æˆ‘ä»¬å¦‚ä½•æ¥å¤„ç†ä¸å¯é¿å…çš„ç†µ - é€šè¿‡<em>ä¸</em>è®©é—®é¢˜ç§¯ç´¯ï¼Œè¿™æ®µä»£ç å®ç°äº†ç›¸å½“äº\"å…³æ‰å®ƒé‡æ–°æ‰“å¼€\"çš„æ•ˆæœï¼Œè€Œè¿™ç§æ–¹å¼æ•ˆæœå¥½çš„è®©äººæ„å¤–ã€‚</p>\n<p><strong>å¦‚æœæœ‰ä¸€ä¸ªé—®é¢˜å‡ºç°åœ¨æŸä¸ªè¾“å…¥ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦ä»è¿™ä¸ªè¾“å‡ºå‘å‰<em>å•</em>æ­¥è¿½æº¯ - ç›´åˆ°<code class=\"language-text\">setState</code>çš„è°ƒç”¨</strong> è¿™æ®µä»£ç è°ƒè¯•æ¸²æŸ“ç»“æœçš„Bug-Oå¤æ‚åº¦æ˜¯ğŸ(<em>n</em>) ï¼Œå…¶ä¸­<em>n</em>æ˜¯æ¸²æŸ“çš„ä»£ç æ‰§è¡Œåˆ†æ”¯æ•°ã€‚è¿™é‡Œåªæœ‰4ä¸ª(å› ä¸ºæˆ‘ä»¬åªæœ‰4ä¸­æƒ…å†µåœ¨<code class=\"language-text\">switch</code>ä¸­)ã€‚</p>\n<p>è¿™ç§æ–¹å¼ä¼šé—ç•™ä¸€äº›é€»è¾‘åˆ¤æ–­æ¥è®¾ç½®çŠ¶æ€ï¼Œä½†æ˜¯è°ƒè¯•è¿™äº›çŠ¶æ€çš„è®¾ç½®ä¼šç›¸å¯¹ç®€å•ä¸€äº›ï¼Œå› ä¸ºè¿™äº›ä¸­é—´çŠ¶æ€éƒ½å¯ä»¥è¢«æ‰“å°æˆ–è€…æ–­ç‚¹è°ƒè¯•ã€‚æˆ‘ä»¬ç”šè‡³å¯ä»¥æ˜ç¡®çš„é˜»æ­¢ä¸€äº›ä¸æœŸæœ›å‘ç”Ÿçš„æ”¹å˜:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">trySubmit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>currentState<span class=\"token punctuation\">.</span>step <span class=\"token operator\">===</span> <span class=\"token string\">'pending'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ä¸å…è®¸æäº¤ä¸¤æ¬¡</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>ä¼—æ‰€å‘¨çŸ¥ï¼Œé¢‘ç¹çš„è®¾ç½®DOMå…ƒç´ ä¼šé€ æˆä¸€äº›æ¶ˆè€—ã€‚å¤©çœŸçš„æ¯æ¬¡éƒ½ç§»é™¤å¹¶é‡æ–°åˆ›å»ºDOMå…ƒç´ ä¼šä¸¢å¤±DOMå…ƒç´ å†…éƒ¨çš„çŠ¶æ€ï¼Œä¸¢å¤±ç„¦ç‚¹ï¼Œåœ¨å¤§å‹çš„åº”ç”¨ä¸­å¯èƒ½ä¼šé€ æˆä¸¥é‡çš„æ€§èƒ½é—®é¢˜ã€‚</p>\n<p>è¿™å°±æ˜¯ä¸€äº›ç±»ä¼¼äºReactçš„æ¡†æ¶ä¹‹æ‰€ç”¨ã€‚å®ƒä»¬è®©ä½ ä»æ€»æ˜¯é‡æ–°åˆ›å»ºUIå…ƒç´ çš„<em>æ€ç»´</em>æ”¹å˜ä¸ºä¸éœ€è¦å…³å¿ƒè¿™äº›ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">FormStatus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    step<span class=\"token punctuation\">:</span> <span class=\"token string\">'initial'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleSubmit</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    e<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">.</span>step <span class=\"token operator\">===</span> <span class=\"token string\">'pending'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Don't allow to submit twice</span>\n      <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> step<span class=\"token punctuation\">:</span> <span class=\"token string\">'pending'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    submitForm<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> step<span class=\"token punctuation\">:</span> <span class=\"token string\">'success'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> step<span class=\"token punctuation\">:</span> <span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span> error <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">let</span> content<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">.</span>step<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'pending'</span><span class=\"token punctuation\">:</span>\n      content <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Spinner <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'success'</span><span class=\"token punctuation\">:</span>\n      content <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>SuccessMessage <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'error'</span><span class=\"token punctuation\">:</span>\n      content <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>ErrorMessage error<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>RetryButton onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleSubmit<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>form onSubmit<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleSubmit<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n      <span class=\"token punctuation\">{</span>content<span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>form<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>è¿™å—ä»£ç å¯èƒ½çœ‹èµ·æ¥å¾ˆä¸ä¸€æ ·ï¼Œä½†æ˜¯è®¾è®¡åŸåˆ™æ˜¯ç›¸åŒçš„ã€‚è¿™ç§ç»„ä»¶çš„å®šä¹‰æ–¹å¼æ¡†å®šäº†å¼€å‘è€…ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿæ¸…æ¥šçš„çŸ¥é“è¿™ä¸ªé¡µé¢æ²¡æœ‰æ··æ·†äº†DOMå’Œstateæ“ä½œçš„<em>å…¶ä»–</em>ä»£ç äº†ã€‚ç»„ä»¶åŒ–é™ä½äº†Bug-OæŒ‡æ ‡</p>\n<p>äº‹å®ä¸Šï¼Œåœ¨Reactåº”ç”¨ä¸­å¦‚æœ<em>ä»»ä½•</em>åœ¨DOMä¸­çš„å€¼å¦‚æœæœ‰é—®é¢˜çš„è¯ï¼Œä½ å¯ä»¥é€šè¿‡é€ä¸ªè¿½è¸ªè¿™ä¸ªç»„ä»¶çš„ä»£ç ç”Ÿæˆçš„Reactæ ‘æ¥å¯»æ‰¾è¿™ä¸ªé—®é¢˜çš„æ¥æºã€‚æ— è®ºè¿™ä¸ªåº”ç”¨çš„å¤§å°å¦‚ä½•ï¼Œå¯»æ‰¾ä¸€ä¸ªæ¸²æŸ“çš„å€¼çš„æ¥æºåªéœ€è¦ğŸ(<em>æ ‘çš„é«˜åº¦</em>)</p>\n<p><strong>ä¸‹æ¬¡å½“ä½ æƒ³å¯¹ä¸€ä¸ªAPIè¯„ä¼°ï¼Œä½ å°±ä¼šæ€è€ƒï¼šä½¿ç”¨è¿™ä¸ªAPIå¹¶è°ƒè¯•å®ƒçš„ğŸ(<em>n</em>)æ˜¯ä»€ä¹ˆ</strong> æœ‰å“ªäº›APIå’Œè®¾è®¡åŸåˆ™ä½ æ¯”è¾ƒç†Ÿæ‚‰çš„ï¼ŸRedux, CSS, inheritance - ä»–ä»¬éƒ½æ‹¥æœ‰è‡ªå·±çš„Bug-Oã€‚</p>\n<hr>","frontmatter":{"title":"ç¿»è¯‘: \"Bug-O\"è¡¨ç¤ºæ³•","date":"25 January, 2019","tag":"translate,overreacted"},"excerpt":"æœ¬æ–‡å‡ºè‡ªoverreactedï¼Œè¿™æ˜¯Dan Abramovå†™çš„åšå®¢ï¼Œæˆ‘è§‰å¾—å¯¹å¾ˆæœ‰ç”¨æ‰€ä»¥ç‰¹æ„åšäº†è¿™ä¸ªç¿»è¯‘ç³»åˆ—ï¼ŒåŸæ–‡é“¾æ¥è¯·æŸ¥çœ‹è¿™é‡Œå½“æˆ‘ä»¬åœ¨ç¼–å†™ä¸€äº›éœ€æ±‚é«˜æ€§èƒ½çš„ä»£ç çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å…»æˆä¸€ä¸ªæ—¶åˆ»æ³¨æ„å½“å‰ç®—æ³•å¤æ‚åº¦çš„ä¹ æƒ¯ã€‚æˆ‘ä»¬é€šå¸¸é€šè¿‡å¤§Oè¡¨ç¤ºæ³•æ¥è¯„ä¼°ã€‚å¤§Oâ€¦"}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"translate-overreacted-the-bug-o-notation"}}